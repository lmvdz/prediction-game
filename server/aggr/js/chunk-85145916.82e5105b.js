(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85145916"],{"9e91":function(e,t,n){"use strict";n.r(t),n.d(t,"exportDB",(function(){return k})),n.d(t,"importDB",(function(){return I})),n.d(t,"importInto",(function(){return K})),n.d(t,"peakImportFile",(function(){return R}));var r=n("cd3b");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function i(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function u(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):i(e.value).then(a,u)}s((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function a(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map((function(e){return e.src})).join(",")}function u(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}function s(e,t){return new Promise((function(n,r){var i=new FileReader;i.onabort=function(e){return r(new Error("file read aborted"))},i.onerror=function(e){return r(e.target.error)},i.onload=function(e){return n(e.target.result)},"binary"===t?i.readAsArrayBuffer(e):i.readAsText(e)}))}function c(e,t){if("undefined"===typeof FileReaderSync)throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r="binary"===t?n.readAsArrayBuffer(e):n.readAsText(e);return r}var l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function f(e,t){return t={exports:{}},e(t,t.exports),t.exports}for(var h=f((function(e,t){!function(t,n){e.exports=n()}(0,(function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,a=Object.getPrototypeOf,u={}.hasOwnProperty,s=u.toString,c=["type","replaced","iterateIn","iterateUnsetNumeric"];function l(e,t){return y.isObject(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function f(e){return o.call(e).slice(8,-1)}function h(t,n){if(!t||"object"!==(void 0===t?"undefined":e(t)))return!1;var r=a(t);if(!r)return!1;var i=u.call(r,"constructor")&&r.constructor;return"function"!=typeof i?null===n:"function"==typeof i&&null!==n&&s.call(i)===s.call(n)}function p(e){return!(!e||"Object"!==f(e))&&(!a(e)||h(e,Object))}function d(t){return t&&"object"===(void 0===t?"undefined":e(t))}function y(o){var a=[],u=[],s={},f=this.types={},m=this.stringify=function(e,t,n,r){r=Object.assign({},o,r,{stringification:!0});var a=O(e,null,r);return i(a)?JSON.stringify(a[0],t,n):a.then((function(e){return JSON.stringify(e,t,n)}))};this.stringifySync=function(e,t,n,r){return m(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,t,n,r){return m(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var E=this.parse=function(e,t,n){return n=Object.assign({},o,n,{parse:!0}),A(JSON.parse(e,t),n)};this.parseSync=function(e,t,n){return E(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.parseAsync=function(e,t,n){return E(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.specialTypeNames=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)},this.rootTypeName=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)};var O=this.encapsulate=function(l,f,v){var m=(v=Object.assign({sync:!0},o,v)).sync,g={},w=[],E=[],O=[],A=!(v&&"cyclic"in v)||v.cyclic,x=v.encapsulateObserver,S=T("",l,A,f||{},O);function k(e){var t=Object.values(g);if(v.iterateNone)return t.length?t[0]:y.getJSONType(e);if(t.length){if(v.returnTypeNames)return[].concat(n(new Set(t)));e&&p(e)&&!e.hasOwnProperty("$types")?e.$types=g:e={$:e,$types:{$:g}}}else d(e)&&e.hasOwnProperty("$types")&&(e={$:e,$types:!0});return!v.returnTypeNames&&e}return O.length?m&&v.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function e(n,r){return Promise.all(r.map((function(e){return e[1].p}))).then((function(i){return Promise.all(i.map((function(i){var o=[],a=r.splice(0,1)[0],u=t(a,7),s=u[0],c=u[2],l=u[3],f=u[4],p=u[5],d=u[6],y=T(s,i,c,l,o,!0,d),v=h(y,_);return s&&v?y.p.then((function(t){return f[p]=t,e(n,o)})):(s?f[p]=y:n=v?y.p:y,e(n,o))})))})).then((function(){return n}))}(S,O)).then(k):!m&&v.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():v.stringification&&m?[k(S)]:m?k(S):Promise.resolve(k(S));function P(e,t,n){Object.assign(e,t);var r=c.map((function(t){var n=e[t];return delete e[t],n}));n(),c.forEach((function(t,n){e[t]=r[n]}))}function T(t,n,o,u,s,c,l){var f=void 0,d={},m=void 0===n?"undefined":e(n),O=x?function(e){var r=l||u.type||y.getJSONType(n);x(Object.assign(e||d,{keypath:t,value:n,cyclic:o,stateObj:u,promisesData:s,resolvingTypesonPromise:c,awaitingTypesonPromise:h(n,_)},void 0!==r?{type:r}:{}))}:null;if(m in{string:1,boolean:1,number:1,undefined:1})return void 0===n||"number"===m&&(isNaN(n)||n===-1/0||n===1/0)?(f=N(t,n,u,s,!1,c,O))!==n&&(d={replaced:f}):f=n,O&&O(),f;if(null===n)return O&&O(),n;if(o&&!u.iterateIn&&!u.iterateUnsetNumeric){var A=w.indexOf(n);if(!(A<0))return g[t]="#",O&&O({cyclicKeypath:E[A]}),"#"+E[A];!0===o&&(w.push(n),E.push(t))}var S=p(n),k=i(n),j=(S||k)&&(!a.length||u.replaced)||u.iterateIn?n:N(t,n,u,s,S||k,null,O),C=void 0;if(j!==n?(f=j,d={replaced:j}):k||"array"===u.iterateIn?(C=new Array(n.length),d={clone:C}):S||"object"===u.iterateIn?d={clone:C={}}:""===t&&h(n,_)?(s.push([t,n,o,u,void 0,void 0,u.type]),f=n):f=n,O&&O(),v.iterateNone)return C||f;if(!C)return f;if(u.iterateIn){var B=function(e){var r={ownKeys:n.hasOwnProperty(e)};P(u,r,(function(){var r=t+(t?".":"")+b(e),i=T(r,n[e],!!o,u,s,c);h(i,_)?s.push([r,i,!!o,u,C,e,u.type]):void 0!==i&&(C[e]=i)}))};for(var I in n)B(I);O&&O({endIterateIn:!0,end:!0})}else r(n).forEach((function(e){var r=t+(t?".":"")+b(e);P(u,{ownKeys:!0},(function(){var t=T(r,n[e],!!o,u,s,c);h(t,_)?s.push([r,t,!!o,u,C,e,u.type]):void 0!==t&&(C[e]=t)}))})),O&&O({endIterateOwn:!0,end:!0});if(u.iterateUnsetNumeric){for(var R=n.length,K=function(e){if(!(e in n)){var r=t+(t?".":"")+e;P(u,{ownKeys:!1},(function(){var t=T(r,void 0,!!o,u,s,c);h(t,_)?s.push([r,t,!!o,u,C,e,u.type]):void 0!==t&&(C[e]=t)}))}},D=0;D<R;D++)K(D);O&&O({endIterateUnsetNumeric:!0,end:!0})}return C}function N(e,t,n,r,i,o,c){for(var l=i?a:u,f=l.length;f--;){var h=l[f];if(h.test(t,n)){var p=h.type;if(s[p]){var d=g[e];g[e]=d?[p].concat(d):p}return Object.assign(n,{type:p,replaced:!0}),!m&&h.replaceAsync||h.replace?(c&&c({replacing:!0}),T(e,h[m||!h.replaceAsync?"replace":"replaceAsync"](t,n),A&&"readonly",n,r,o,p)):(c&&c({typeDetected:!0}),T(e,t,A&&"readonly",n,r,o,p))}}return t}};this.encapsulateSync=function(e,t,n){return O(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.encapsulateAsync=function(e,t,n){return O(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var A=this.revive=function(e,n){var a=(n=Object.assign({sync:!0},o,n)).sync,u=e&&e.$types,c=!0;if(!u)return e;if(!0===u)return e.$;u.$&&p(u.$)&&(e=e.$,u=u.$,c=!1);var f=[],d={},y=function e(n,o,a,l,y,v){if(!c||"$types"!==n){var m=u[n];if(i(o)||p(o)){var _=i(o)?new Array(o.length):{};for(r(o).forEach((function(t){var r=e(n+(n?".":"")+b(t),o[t],a||_,l,_,t);h(r,w)?_[t]=void 0:void 0!==r&&(_[t]=r)})),o=_;f.length;){var E=t(f[0],4),O=E[0],A=E[1],x=E[2],S=E[3],k=g(O,A);if(h(k,w))x[S]=void 0;else{if(void 0===k)break;x[S]=k}f.splice(0,1)}}if(!m)return o;if("#"===m){var P=g(a,o.substr(1));return void 0===P&&f.push([a,o.substr(1),y,v]),P}var T=l.sync;return[].concat(m).reduce((function(e,t){var n=s[t];if(!n)throw new Error("Unregistered type: "+t);return n[T&&n.revive?"revive":!T&&n.reviveAsync?"reviveAsync":"revive"](e,d)}),o)}}("",e,null,n);return l(y=h(y,w)?void 0:y)?a&&n.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():y:!a&&n.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():a?y:Promise.resolve(y)};this.reviveSync=function(e,t){return A(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return A(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,t){return t=t||{},[].concat(e).forEach((function e(n){if(i(n))return n.map(e);n&&r(n).forEach((function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(y.JSON_TYPES.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var r=n[e],o=r.testPlainObjects?a:u,c=o.filter((function(t){return t.type===e}));if(c.length&&(o.splice(o.indexOf(c[0]),1),delete s[e],delete f[e]),r){if("function"==typeof r){var l=r;r={test:function(e){return e&&e.constructor===l},replace:function(e){return v({},e)},revive:function(e){return v(Object.create(l.prototype),e)}}}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var h={type:e,test:r.test.bind(r)};r.replace&&(h.replace=r.replace.bind(r)),r.replaceAsync&&(h.replaceAsync=r.replaceAsync.bind(r));var p="number"==typeof t.fallback?t.fallback:t.fallback?0:1/0;if(r.testPlainObjects?a.splice(p,0,h):u.splice(p,0,h),r.revive||r.reviveAsync){var d={};r.revive&&(d.revive=r.revive.bind(r)),r.reviveAsync&&(d.reviveAsync=r.reviveAsync.bind(r)),s[e]=d}f[e]=r}}))})),this}}function v(e,t){return r(t).map((function(n){e[n]=t[n]})),e}function b(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function m(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function g(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[m(t.substr(0,n))];return void 0===r?void 0:g(r,t.substr(n+1))}return e[m(t)]}function w(){}function _(e){this.p=new Promise(e)}return _.prototype.then=function(e,t){var n=this;return new _((function(r,i){n.p.then((function(t){r(e?e(t):t)}),(function(e){n.p.catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))}))},_.prototype.catch=function(e){return this.then(null,e)},_.resolve=function(e){return new _((function(t){t(e)}))},_.reject=function(e){return new _((function(t,n){n(e)}))},["all","race"].map((function(e){_[e]=function(t){return new _((function(n,r){Promise[e](t.map((function(e){return e.p}))).then(n,r)}))}})),y.Undefined=w,y.Promise=_,y.isThenable=l,y.toStringTag=f,y.hasConstructorOf=h,y.isObject=d,y.isPlainObject=p,y.isUserObject=function e(t){if(!t||"Object"!==f(t))return!1;var n=a(t);return!n||h(t,Object)||e(n)},y.escapeKeyPathComponent=b,y.unescapeKeyPathComponent=m,y.getByKeyPath=g,y.getJSONType=function(t){return null===t?"null":i(t)?"array":void 0===t?"undefined":e(t)},y.JSON_TYPES=["null","boolean","number","string","array","object"],y}))})),p=f((function(e,t){!function(t,n){e.exports=n()}(0,(function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,a=Object.getPrototypeOf,u={}.hasOwnProperty,s=u.toString,c=["type","replaced","iterateIn","iterateUnsetNumeric"];function f(e,t){return v.isObject(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function h(e){return o.call(e).slice(8,-1)}function p(t,n){if(!t||"object"!==(void 0===t?"undefined":e(t)))return!1;var r=a(t);if(!r)return!1;var i=u.call(r,"constructor")&&r.constructor;return"function"!=typeof i?null===n:"function"==typeof i&&null!==n&&s.call(i)===s.call(n)}function d(e){return!(!e||"Object"!==h(e))&&(!a(e)||p(e,Object))}function y(t){return t&&"object"===(void 0===t?"undefined":e(t))}function v(o){var a=[],u=[],s={},l=this.types={},h=this.stringify=function(e,t,n,r){r=Object.assign({},o,r,{stringification:!0});var a=O(e,null,r);return i(a)?JSON.stringify(a[0],t,n):a.then((function(e){return JSON.stringify(e,t,n)}))};this.stringifySync=function(e,t,n,r){return h(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,t,n,r){return h(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var g=this.parse=function(e,t,n){return n=Object.assign({},o,n,{parse:!0}),A(JSON.parse(e,t),n)};this.parseSync=function(e,t,n){return g(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.parseAsync=function(e,t,n){return g(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.specialTypeNames=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)},this.rootTypeName=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)};var O=this.encapsulate=function(l,f,h){var b=(h=Object.assign({sync:!0},o,h)).sync,g={},w=[],_=[],O=[],A=!(h&&"cyclic"in h)||h.cyclic,x=h.encapsulateObserver,S=T("",l,A,f||{},O);function k(e){var t=Object.values(g);if(h.iterateNone)return t.length?t[0]:v.getJSONType(e);if(t.length){if(h.returnTypeNames)return[].concat(n(new Set(t)));e&&d(e)&&!e.hasOwnProperty("$types")?e.$types=g:e={$:e,$types:{$:g}}}else y(e)&&e.hasOwnProperty("$types")&&(e={$:e,$types:!0});return!h.returnTypeNames&&e}return O.length?b&&h.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function e(n,r){return Promise.all(r.map((function(e){return e[1].p}))).then((function(i){return Promise.all(i.map((function(i){var o=[],a=r.splice(0,1)[0],u=t(a,7),s=u[0],c=u[2],l=u[3],f=u[4],h=u[5],d=u[6],y=T(s,i,c,l,o,!0,d),v=p(y,E);return s&&v?y.p.then((function(t){return f[h]=t,e(n,o)})):(s?f[h]=y:n=v?y.p:y,e(n,o))})))})).then((function(){return n}))}(S,O)).then(k):!b&&h.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():h.stringification&&b?[k(S)]:b?k(S):Promise.resolve(k(S));function P(e,t,n){Object.assign(e,t);var r=c.map((function(t){var n=e[t];return delete e[t],n}));n(),c.forEach((function(t,n){e[t]=r[n]}))}function T(t,n,o,u,s,c,l){var f=void 0,y={},b=void 0===n?"undefined":e(n),O=x?function(e){var r=l||u.type||v.getJSONType(n);x(Object.assign(e||y,{keypath:t,value:n,cyclic:o,stateObj:u,promisesData:s,resolvingTypesonPromise:c,awaitingTypesonPromise:p(n,E)},void 0!==r?{type:r}:{}))}:null;if(b in{string:1,boolean:1,number:1,undefined:1})return void 0===n||"number"===b&&(isNaN(n)||n===-1/0||n===1/0)?(f=N(t,n,u,s,!1,c,O))!==n&&(y={replaced:f}):f=n,O&&O(),f;if(null===n)return O&&O(),n;if(o&&!u.iterateIn&&!u.iterateUnsetNumeric){var A=w.indexOf(n);if(!(A<0))return g[t]="#",O&&O({cyclicKeypath:_[A]}),"#"+_[A];!0===o&&(w.push(n),_.push(t))}var S=d(n),k=i(n),j=(S||k)&&(!a.length||u.replaced)||u.iterateIn?n:N(t,n,u,s,S||k,null,O),C=void 0;if(j!==n?(f=j,y={replaced:j}):k||"array"===u.iterateIn?(C=new Array(n.length),y={clone:C}):S||"object"===u.iterateIn?y={clone:C={}}:""===t&&p(n,E)?(s.push([t,n,o,u,void 0,void 0,u.type]),f=n):f=n,O&&O(),h.iterateNone)return C||f;if(!C)return f;if(u.iterateIn){var B=function(e){var r={ownKeys:n.hasOwnProperty(e)};P(u,r,(function(){var r=t+(t?".":"")+m(e),i=T(r,n[e],!!o,u,s,c);p(i,E)?s.push([r,i,!!o,u,C,e,u.type]):void 0!==i&&(C[e]=i)}))};for(var I in n)B(I);O&&O({endIterateIn:!0,end:!0})}else r(n).forEach((function(e){var r=t+(t?".":"")+m(e);P(u,{ownKeys:!0},(function(){var t=T(r,n[e],!!o,u,s,c);p(t,E)?s.push([r,t,!!o,u,C,e,u.type]):void 0!==t&&(C[e]=t)}))})),O&&O({endIterateOwn:!0,end:!0});if(u.iterateUnsetNumeric){for(var R=n.length,K=function(e){if(!(e in n)){var r=t+(t?".":"")+e;P(u,{ownKeys:!1},(function(){var t=T(r,void 0,!!o,u,s,c);p(t,E)?s.push([r,t,!!o,u,C,e,u.type]):void 0!==t&&(C[e]=t)}))}},D=0;D<R;D++)K(D);O&&O({endIterateUnsetNumeric:!0,end:!0})}return C}function N(e,t,n,r,i,o,c){for(var l=i?a:u,f=l.length;f--;){var h=l[f];if(h.test(t,n)){var p=h.type;if(s[p]){var d=g[e];g[e]=d?[p].concat(d):p}return Object.assign(n,{type:p,replaced:!0}),!b&&h.replaceAsync||h.replace?(c&&c({replacing:!0}),T(e,h[b||!h.replaceAsync?"replace":"replaceAsync"](t,n),A&&"readonly",n,r,o,p)):(c&&c({typeDetected:!0}),T(e,t,A&&"readonly",n,r,o,p))}}return t}};this.encapsulateSync=function(e,t,n){return O(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.encapsulateAsync=function(e,t,n){return O(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var A=this.revive=function(e,n){var a=(n=Object.assign({sync:!0},o,n)).sync,u=e&&e.$types,c=!0;if(!u)return e;if(!0===u)return e.$;u.$&&d(u.$)&&(e=e.$,u=u.$,c=!1);var l=[],h={},y=function e(n,o,a,f,y,v){if(!c||"$types"!==n){var b=u[n];if(i(o)||d(o)){var g=i(o)?new Array(o.length):{};for(r(o).forEach((function(t){var r=e(n+(n?".":"")+m(t),o[t],a||g,f,g,t);p(r,_)?g[t]=void 0:void 0!==r&&(g[t]=r)})),o=g;l.length;){var E=t(l[0],4),O=E[0],A=E[1],x=E[2],S=E[3],k=w(O,A);if(p(k,_))x[S]=void 0;else{if(void 0===k)break;x[S]=k}l.splice(0,1)}}if(!b)return o;if("#"===b){var P=w(a,o.substr(1));return void 0===P&&l.push([a,o.substr(1),y,v]),P}var T=f.sync;return[].concat(b).reduce((function(e,t){var n=s[t];if(!n)throw new Error("Unregistered type: "+t);return n[T&&n.revive?"revive":!T&&n.reviveAsync?"reviveAsync":"revive"](e,h)}),o)}}("",e,null,n);return f(y=p(y,_)?void 0:y)?a&&n.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():y:!a&&n.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():a?y:Promise.resolve(y)};this.reviveSync=function(e,t){return A(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return A(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,t){return t=t||{},[].concat(e).forEach((function e(n){if(i(n))return n.map(e);n&&r(n).forEach((function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(v.JSON_TYPES.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var r=n[e],o=r.testPlainObjects?a:u,c=o.filter((function(t){return t.type===e}));if(c.length&&(o.splice(o.indexOf(c[0]),1),delete s[e],delete l[e]),r){if("function"==typeof r){var f=r;r={test:function(e){return e&&e.constructor===f},replace:function(e){return b({},e)},revive:function(e){return b(Object.create(f.prototype),e)}}}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var h={type:e,test:r.test.bind(r)};r.replace&&(h.replace=r.replace.bind(r)),r.replaceAsync&&(h.replaceAsync=r.replaceAsync.bind(r));var p="number"==typeof t.fallback?t.fallback:t.fallback?0:1/0;if(r.testPlainObjects?a.splice(p,0,h):u.splice(p,0,h),r.revive||r.reviveAsync){var d={};r.revive&&(d.revive=r.revive.bind(r)),r.reviveAsync&&(d.reviveAsync=r.reviveAsync.bind(r)),s[e]=d}l[e]=r}}))})),this}}function b(e,t){return r(t).map((function(n){e[n]=t[n]})),e}function m(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function g(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function w(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[g(t.substr(0,n))];return void 0===r?void 0:w(r,t.substr(n+1))}return e[g(t)]}function _(){}function E(e){this.p=new Promise(e)}E.prototype.then=function(e,t){var n=this;return new E((function(r,i){n.p.then((function(t){r(e?e(t):t)}),(function(e){n.p.catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))}))},E.prototype.catch=function(e){return this.then(null,e)},E.resolve=function(e){return new E((function(t){t(e)}))},E.reject=function(e){return new E((function(t,n){n(e)}))},["all","race"].map((function(e){E[e]=function(t){return new E((function(n,r){Promise[e](t.map((function(e){return e.p}))).then(n,r)}))}})),v.Undefined=_,v.Promise=E,v.isThenable=f,v.toStringTag=h,v.hasConstructorOf=p,v.isObject=y,v.isPlainObject=d,v.isUserObject=function e(t){if(!t||"Object"!==h(t))return!1;var n=a(t);return!n||p(t,Object)||e(n)},v.escapeKeyPathComponent=m,v.unescapeKeyPathComponent=g,v.getByKeyPath=w,v.getJSONType=function(t){return null===t?"null":i(t)?"array":void 0===t?"undefined":e(t)},v.JSON_TYPES=["null","boolean","number","string","array","object"];for(var O={userObject:{test:function(e,t){return v.isUserObject(e)},replace:function(e){return Object.assign({},e)},revive:function(e){return e}}},A=[[{sparseArrays:{testPlainObjects:!0,test:function(e){return Array.isArray(e)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e}}},{sparseUndefined:{test:function(e,t){return void 0===e&&!1===t.ownKeys},replace:function(e){return null},revive:function(e){}}}],{undef:{test:function(e,t){return void 0===e&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return null},revive:function(e){return new v.Undefined}}}],x={StringObject:{test:function(t){return"String"===v.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(t){return"Boolean"===v.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return Boolean(e)},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(t){return"Number"===v.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},S=[{nan:{test:function(e){return"number"==typeof e&&isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return NaN}}},{infinity:{test:function(e){return e===1/0},replace:function(e){return"Infinity"},revive:function(e){return 1/0}}},{negativeInfinity:{test:function(e){return e===-1/0},replace:function(e){return"-Infinity"},revive:function(e){return-1/0}}}],k={date:{test:function(e){return"Date"===v.toStringTag(e)},replace:function(e){var t=e.getTime();return isNaN(t)?"NaN":t},revive:function(e){return"NaN"===e?new Date(NaN):new Date(e)}}},P={regexp:{test:function(e){return"RegExp"===v.toStringTag(e)},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,n=e.flags;return new RegExp(t,n)}}},T={map:{test:function(e){return"Map"===v.toStringTag(e)},replace:function(e){return Array.from(e.entries())},revive:function(e){return new Map(e)}}},N={set:{test:function(e){return"Set"===v.toStringTag(e)},replace:function(e){return Array.from(e.values())},revive:function(e){return new Set(e)}}},j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=new Uint8Array(256),B=0;B<j.length;B++)C[j.charCodeAt(B)]=B;var I=function(e,t,n){for(var r=new Uint8Array(e,t,n),i=r.length,o="",a=0;a<i;a+=3)o+=j[r[a]>>2],o+=j[(3&r[a])<<4|r[a+1]>>4],o+=j[(15&r[a+1])<<2|r[a+2]>>6],o+=j[63&r[a+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},R=function(e){var t=e.length,n=.75*e.length,r=0,i=void 0,o=void 0,a=void 0,u=void 0;"="===e[e.length-1]&&(n--,"="===e[e.length-2]&&n--);for(var s=new ArrayBuffer(n),c=new Uint8Array(s),l=0;l<t;l+=4)i=C[e.charCodeAt(l)],o=C[e.charCodeAt(l+1)],a=C[e.charCodeAt(l+2)],u=C[e.charCodeAt(l+3)],c[r++]=i<<2|o>>4,c[r++]=(15&o)<<4|a>>2,c[r++]=(3&a)<<6|63&u;return s},K={arraybuffer:{test:function(e){return"ArrayBuffer"===v.toStringTag(e)},replace:function(e,t){t.buffers||(t.buffers=[]);var n=t.buffers.indexOf(e);return n>-1?{index:n}:(t.buffers.push(e),I(e))},revive:function(t,n){if(n.buffers||(n.buffers=[]),"object"===(void 0===t?"undefined":e(t)))return n.buffers[t.index];var r=R(t);return n.buffers.push(r),r}}},D="undefined"==typeof self?l:self,U={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(e){var t=e,n=D[t];n&&(U[e.toLowerCase()]={test:function(e){return v.toStringTag(e)===t},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.length;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,length:i}:(t.buffers.push(n),{encoded:I(n),byteOffset:r,length:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var r=e.byteOffset,i=e.length,o=e.encoded,a=e.index,u=void 0;return"index"in e?u=t.buffers[a]:(u=R(o),t.buffers.push(u)),new n(u,r,i)}})}));var F={dataview:{test:function(e){return"DataView"===v.toStringTag(e)},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.byteLength;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,byteLength:i}:(t.buffers.push(n),{encoded:I(n),byteOffset:r,byteLength:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var n=e.byteOffset,r=e.byteLength,i=e.encoded,o=e.index,a=void 0;return"index"in e?a=t.buffers[o]:(a=R(i),t.buffers.push(a)),new DataView(a,n,r)}}},L={IntlCollator:{test:function(e){return v.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return v.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return v.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}};function M(e){for(var t=new Uint16Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}var q={file:{test:function(e){return"File"===v.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.open("GET",URL.createObjectURL(e),!1),"undefined"!=typeof TextEncoder&&t.overrideMimeType("text/plain; charset=utf-16le"),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return t.send(),{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,n=e.type,r=e.stringContents,i=e.lastModified,o=M(r);return new File([o],t,{type:n,lastModified:i})},replaceAsync:function(e){return new v.Promise((function(t,n){if(e.isClosed)n(new Error("The File is closed"));else{var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result,name:e.name,lastModified:e.lastModified})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsText(e,"UTF-16")}}))}}};return[O,A,x,S,k,P,{imagedata:{test:function(e){return"ImageData"===v.toStringTag(e)},replace:function(e){return{array:Array.from(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return"ImageBitmap"===v.toStringTag(e)||e&&e.dataset&&"ImageBitmap"===e.dataset.toStringTag},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.onload=function(){n.drawImage(r,0,0)},r.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.onload=function(){n.drawImage(r,0,0)},r.src=e,createImageBitmap(t)}}},q,{file:q.file,filelist:{test:function(e){return"FileList"===v.toStringTag(e)},replace:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.item(n);return t},revive:function(e){function t(){this._files=arguments[0],this.length=this._files.length}return t.prototype.item=function(e){return this._files[e]},t.prototype[Symbol.toStringTag]="FileList",new t(e)}}},{blob:{test:function(e){return"Blob"===v.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.open("GET",URL.createObjectURL(e),!1),"undefined"!=typeof TextEncoder&&t.overrideMimeType("text/plain; charset=utf-16le"),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return t.send(),{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,n=e.stringContents;return new Blob([M(n)],{type:t})},replaceAsync:function(e){return new v.Promise((function(t,n){if(e.isClosed)n(new Error("The Blob is closed"));else{var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsText(e,"UTF-16")}}))}}}].concat("function"==typeof Map?T:[],"function"==typeof Set?N:[],"function"==typeof ArrayBuffer?K:[],"function"==typeof Uint8Array?U:[],"function"==typeof DataView?F:[],"undefined"!=typeof Intl?L:[])}))})),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=new Uint8Array(256),v=0;v<d.length;v++)y[d.charCodeAt(v)]=v;var b=function(e,t,n){null!==n&&void 0!==n||(n=e.byteLength);for(var r=new Uint8Array(e,t||0,n),i=r.length,o="",a=0;a<i;a+=3)o+=d[r[a]>>2],o+=d[(3&r[a])<<4|r[a+1]>>4],o+=d[(15&r[a+1])<<2|r[a+2]>>6],o+=d[63&r[a+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},m=function(e){var t,n,r,i,o=e.length,a=.75*e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);for(var s=new ArrayBuffer(a),c=new Uint8Array(s),l=0;l<o;l+=4)t=y[e.charCodeAt(l)],n=y[e.charCodeAt(l+1)],r=y[e.charCodeAt(l+2)],i=y[e.charCodeAt(l+3)],c[u++]=t<<2|n>>4,c[u++]=(15&n)<<4|r>>2,c[u++]=(3&r)<<6|63&i;return s},g="undefined"===typeof self?global:self,w={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(e){var t=e,n=g[t];n&&(w[e.toLowerCase()+"2"]={test:function(e){return h.toStringTag(e)===t},replace:function(e){var t=e.buffer,n=e.byteOffset,r=e.length;return{buffer:t,byteOffset:n,length:r}},revive:function(e){var t=e.buffer,r=e.byteOffset,i=e.length;return new n(t,r,i)}})}));var _={arraybuffer:{test:function(e){return"ArrayBuffer"===h.toStringTag(e)},replace:function(e){return b(e,0,e.byteLength)},revive:function(e){var t=m(e);return t}}},E=(new h).register(p),O="FileReaderSync"in self,A=[],x=0;E.register([_,w,{blob2:{test:function(e){return"Blob"===h.toStringTag(e)},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(O){var t=c(e,"binary"),n=b(t,0,t.byteLength);return{type:e.type,data:n}}A.push(e);var r={type:e.type,data:{start:x,end:x+e.size}};return x+=e.size,r},finalize:function(e,t){e.data=b(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([m(n)],{type:t})}}}]),E.mustFinalize=function(){return A.length>0},E.finalize=function(e){return i(void 0,void 0,void 0,(function(){var t,n,i,a,u,c,l,f,h,p;return o(this,(function(o){switch(o.label){case 0:return[4,s(new Blob(A),"binary")];case 1:if(t=o.sent(),e)for(n=0,i=e;n<i.length;n++)if(a=i[n],a.$types)for(l in u=a.$types,c=u.$,c&&(u=u.$),u)f=u[l],h=E.types[f],h&&h.finalize&&(p=r.getByKeyPath(a,c?"$."+l:l),h.finalize(p,t.slice(p.start,p.end)));return A=[],[2]}}))}))};var S=2e3;function k(e,t){return i(this,void 0,void 0,(function(){function n(){return i(this,void 0,void 0,(function(){var n,i,a,p,d,y,v,b,m;return o(this,(function(g){switch(g.label){case 0:return[4,Promise.all(e.tables.map((function(e){return e.count()})))];case 1:n=g.sent(),n.forEach((function(e,t){return s[t].rowCount=e})),h.totalRows=n.reduce((function(e,t){return e+t})),i=JSON.stringify(l,void 0,c?2:void 0),a=i.lastIndexOf("]"),p=i.substring(0,a),u.push(p),d=t.filter,y=function(n){var i,a,s,l,p,y,v,b,m,g,w,_;return o(this,(function(O){switch(O.label){case 0:i=e.table(n),a=i.schema.primKey,s=!!a.keyPath,l=t.numRowsPerChunk||S,p=s?{tableName:i.name,inbound:!0,rows:[]}:{tableName:i.name,inbound:!1,rows:[]},y=JSON.stringify(p,void 0,c?2:void 0),c&&(y=y.split("\n").join("\n    ")),v=y.lastIndexOf("]"),u.push(y.substring(0,v)),b=null,m=0,g=!0,w=function(){var e,t,p,y,v,w,_,O;return o(this,(function(o){switch(o.label){case 0:return f&&r.ignoreTransaction((function(){return f(h)})),e=null==b?i.limit(l):i.where(":id").above(b).limit(l),[4,e.toArray()];case 1:return t=o.sent(),0===t.length?[2,"break"]:(null!=b&&m>0&&(u.push(","),c&&u.push("\n      ")),g=t.length===l,s?(p=d?t.filter((function(e){return d(n,e)})):t,y=p.map((function(e){return E.encapsulate(e)})),E.mustFinalize()?[4,r.waitFor(E.finalize(y))]:[3,3]):[3,4]);case 2:o.sent(),o.label=3;case 3:return O=JSON.stringify(y,void 0,c?2:void 0),c&&(O=O.split("\n").join("\n      ")),u.push(new Blob([O.substring(1,O.length-1)])),m=p.length,b=t.length>0?r.getByKeyPath(t[t.length-1],a.keyPath):null,[3,8];case 4:return[4,e.primaryKeys()];case 5:return v=o.sent(),w=v.map((function(e,n){return[e,t[n]]})),d&&(w=w.filter((function(e){var t=e[0],r=e[1];return d(n,r,t)}))),_=w.map((function(e){return E.encapsulate(e)})),E.mustFinalize()?[4,r.waitFor(E.finalize(_))]:[3,7];case 6:o.sent(),o.label=7;case 7:O=JSON.stringify(_,void 0,c?2:void 0),c&&(O=O.split("\n").join("\n      ")),u.push(new Blob([O.substring(1,O.length-1)])),m=w.length,b=v.length>0?v[v.length-1]:null,o.label=8;case 8:return h.completedRows+=t.length,[2]}}))},O.label=1;case 1:return g?[5,w()]:[3,3];case 2:return _=O.sent(),"break"===_?[3,3]:[3,1];case 3:return u.push(y.substr(v)),h.completedTables+=1,h.completedTables<h.totalTables&&u.push(","),[2]}}))},v=0,b=s,g.label=2;case 2:return v<b.length?(m=b[v].name,[5,y(m)]):[3,5];case 3:g.sent(),g.label=4;case 4:return v++,[3,2];case 5:return u.push(i.substr(a)),h.done=!0,f&&r.ignoreTransaction((function(){return f(h)})),[2]}}))}))}var u,s,c,l,f,h;return o(this,(function(i){switch(i.label){case 0:t=t||{},u=[],s=e.tables.map((function(e){return{name:e.name,schema:a(e),rowCount:0}})),c=t.prettyJson,l={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:s,data:[]}},f=t.progressCallback,h={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},i.label=1;case 1:return i.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return i.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:return E.finalize(),[7];case 7:return f&&r.ignoreTransaction((function(){return f(h)})),[2,new Blob(u,{type:"text/json"})]}}))}))}var P=1,T={Stream:function(){}},N=f((function(e,t){(function(e){var t="object"===typeof process&&Object({NODE_ENV:"production",VUE_APP_VERSION:"3.1.4",VUE_APP_BUILD_DATE:"26 jun",VUE_APP_EXCHANGES:"binance,binance_futures,binance_us,bitfinex,bitmex,bitstamp,bybit,coinbase,deribit,dydx,ftx,hitbtc,huobi,kraken,okex,phemex,poloniex,serum",VUE_APP_PROXY_URL:"https://cors.aggr.trade/",VUE_APP_API_URL:"https://api.aggr.trade/",VUE_APP_API_SUPPORTED_PAIRS:"",VUE_APP_API_SUPPORTED_TIMEFRAMES:"",VUE_APP_PUBLIC_VAPID_KEY:"",BASE_URL:"/"})?Object({NODE_ENV:"production",VUE_APP_VERSION:"3.1.4",VUE_APP_BUILD_DATE:"26 jun",VUE_APP_EXCHANGES:"binance,binance_futures,binance_us,bitfinex,bitmex,bitstamp,bybit,coinbase,deribit,dydx,ftx,hitbtc,huobi,kraken,okex,phemex,poloniex,serum",VUE_APP_PROXY_URL:"https://cors.aggr.trade/",VUE_APP_API_URL:"https://api.aggr.trade/",VUE_APP_API_SUPPORTED_PAIRS:"",VUE_APP_API_SUPPORTED_TIMEFRAMES:"",VUE_APP_PUBLIC_VAPID_KEY:"",BASE_URL:"/"}):self;e.parser=function(e){return new f(e)},e.CParser=f,e.CStream=p,e.createStream=h,e.MAX_BUFFER_LENGTH=10485760,e.DEBUG="debug"===t.CDEBUG,e.INFO="debug"===t.CDEBUG||"info"===t.CDEBUG,e.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var n,r={textNode:void 0,numberNode:""},i=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e})),o=0;for(var a in e.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++},e.STATE)e.STATE[e.STATE[a]]=a;o=e.STATE;const u={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};function s(t){var n=Math.max(e.MAX_BUFFER_LENGTH,10),i=0;for(var o in r){var a=void 0===t[o]?0:t[o].length;if(a>n)switch(o){case"text":closeText(t);break;default:g(t,"Max buffer length exceeded: "+o)}i=Math.max(i,a)}t.bufferCheckPosition=e.MAX_BUFFER_LENGTH-i+t.position}function c(e){for(var t in r)e[t]=r[t]}Object.create||(Object.create=function(e){function t(){this["__proto__"]=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e["__proto__"]}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});var l=/[\\"\n]/g;function f(t){if(!(this instanceof f))return new f(t);var n=this;c(n),n.bufferCheckPosition=e.MAX_BUFFER_LENGTH,n.q=n.c=n.p="",n.opt=t||{},n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.state=o.BEGIN,n.stack=new Array,n.position=n.column=0,n.line=1,n.slashed=!1,n.unicodeI=0,n.unicodeS=null,n.depth=0,d(n,"onready")}f.prototype={end:function(){w(this)},write:E,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{n=T.Stream}catch(O){n=function(){}}function h(e){return new p(e)}function p(e){if(!(this instanceof p))return new p(e);this._parser=new f(e),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var t=this;n.apply(t),this._parser.onend=function(){t.emit("end")},this._parser.onerror=function(e){t.emit("error",e),t._parser.error=null},i.forEach((function(e){Object.defineProperty(t,"on"+e,{get:function(){return t._parser["on"+e]},set:function(n){if(!n)return t.removeAllListeners(e),t._parser["on"+e]=n,n;t.on(e,n)},enumerable:!0,configurable:!1})}))}function d(t,n,r){e.INFO,t[n]&&t[n](r)}function y(e,t,n){v(e),d(e,t,n)}function v(e,t){e.textNode=m(e.opt,e.textNode),void 0!==e.textNode&&d(e,t||"onvalue",e.textNode),e.textNode=void 0}function b(e){e.numberNode&&d(e,"onvalue",parseFloat(e.numberNode)),e.numberNode=""}function m(e,t){return void 0===t||(e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," "))),t}function g(e,t){return v(e),t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c,t=new Error(t),e.error=t,d(e,"onerror",t),e}function w(e){return e.state===o.VALUE&&0===e.depth||g(e,"Unexpected end"),v(e),e.c="",e.closed=!0,d(e,"onend"),f.call(e,e.opt),e}function _(e){return e===u.carriageReturn||e===u.lineFeed||e===u.space||e===u.tab}function E(t){var n=this;if(this.error)throw this.error;if(n.closed)return g(n,"Cannot write after close. Assign an onready handler.");if(null===t)return w(n);var r=0,i=t.charCodeAt(0),a=n.p;e.DEBUG;while(i){if(a=i,n.c=i=t.charCodeAt(r++),a!==i?n.p=a:a=n.p,!i)break;switch(e.DEBUG,n.position++,i===u.lineFeed?(n.line++,n.column=0):n.column++,n.state){case o.BEGIN:i===u.openBrace?n.state=o.OPEN_OBJECT:i===u.openBracket?n.state=o.OPEN_ARRAY:_(i)||g(n,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(_(i))continue;if(n.state===o.OPEN_KEY)n.stack.push(o.CLOSE_KEY);else{if(i===u.closeBrace){d(n,"onopenobject"),this.depth++,d(n,"oncloseobject"),this.depth--,n.state=n.stack.pop()||o.VALUE;continue}n.stack.push(o.CLOSE_OBJECT)}i===u.doubleQuote?n.state=o.STRING:g(n,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(_(i))continue;n.state,o.CLOSE_KEY,i===u.colon?(n.state===o.CLOSE_OBJECT?(n.stack.push(o.CLOSE_OBJECT),v(n,"onopenobject"),this.depth++):v(n,"onkey"),n.state=o.VALUE):i===u.closeBrace?(y(n,"oncloseobject"),this.depth--,n.state=n.stack.pop()||o.VALUE):i===u.comma?(n.state===o.CLOSE_OBJECT&&n.stack.push(o.CLOSE_OBJECT),v(n),n.state=o.OPEN_KEY):g(n,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(_(i))continue;if(n.state===o.OPEN_ARRAY){if(d(n,"onopenarray"),this.depth++,n.state=o.VALUE,i===u.closeBracket){d(n,"onclosearray"),this.depth--,n.state=n.stack.pop()||o.VALUE;continue}n.stack.push(o.CLOSE_ARRAY)}i===u.doubleQuote?n.state=o.STRING:i===u.openBrace?n.state=o.OPEN_OBJECT:i===u.openBracket?n.state=o.OPEN_ARRAY:i===u.t?n.state=o.TRUE:i===u.f?n.state=o.FALSE:i===u.n?n.state=o.NULL:i===u.minus?n.numberNode+="-":u._0<=i&&i<=u._9?(n.numberNode+=String.fromCharCode(i),n.state=o.NUMBER_DIGIT):g(n,"Bad value");continue;case o.CLOSE_ARRAY:if(i===u.comma)n.stack.push(o.CLOSE_ARRAY),v(n,"onvalue"),n.state=o.VALUE;else if(i===u.closeBracket)y(n,"onclosearray"),this.depth--,n.state=n.stack.pop()||o.VALUE;else{if(_(i))continue;g(n,"Bad array")}continue;case o.STRING:void 0===n.textNode&&(n.textNode="");var c=r-1,f=n.slashed,h=n.unicodeI;e:while(1){e.DEBUG;while(h>0)if(n.unicodeS+=String.fromCharCode(i),i=t.charCodeAt(r++),n.position++,4===h?(n.textNode+=String.fromCharCode(parseInt(n.unicodeS,16)),h=0,c=r-1):h++,!i)break e;if(i===u.doubleQuote&&!f){n.state=n.stack.pop()||o.VALUE,n.textNode+=t.substring(c,r-1),n.position+=r-1-c;break}if(i===u.backslash&&!f&&(f=!0,n.textNode+=t.substring(c,r-1),n.position+=r-1-c,i=t.charCodeAt(r++),n.position++,!i))break;if(f){if(f=!1,i===u.n?n.textNode+="\n":i===u.r?n.textNode+="\r":i===u.t?n.textNode+="\t":i===u.f?n.textNode+="\f":i===u.b?n.textNode+="\b":i===u.u?(h=1,n.unicodeS=""):n.textNode+=String.fromCharCode(i),i=t.charCodeAt(r++),n.position++,c=r-1,i)continue;break}l.lastIndex=r;var p=l.exec(t);if(null===p){r=t.length+1,n.textNode+=t.substring(c,r-1),n.position+=r-1-c;break}if(r=p.index+1,i=t.charCodeAt(p.index),!i){n.textNode+=t.substring(c,r-1),n.position+=r-1-c;break}}n.slashed=f,n.unicodeI=h;continue;case o.TRUE:i===u.r?n.state=o.TRUE2:g(n,"Invalid true started with t"+i);continue;case o.TRUE2:i===u.u?n.state=o.TRUE3:g(n,"Invalid true started with tr"+i);continue;case o.TRUE3:i===u.e?(d(n,"onvalue",!0),n.state=n.stack.pop()||o.VALUE):g(n,"Invalid true started with tru"+i);continue;case o.FALSE:i===u.a?n.state=o.FALSE2:g(n,"Invalid false started with f"+i);continue;case o.FALSE2:i===u.l?n.state=o.FALSE3:g(n,"Invalid false started with fa"+i);continue;case o.FALSE3:i===u.s?n.state=o.FALSE4:g(n,"Invalid false started with fal"+i);continue;case o.FALSE4:i===u.e?(d(n,"onvalue",!1),n.state=n.stack.pop()||o.VALUE):g(n,"Invalid false started with fals"+i);continue;case o.NULL:i===u.u?n.state=o.NULL2:g(n,"Invalid null started with n"+i);continue;case o.NULL2:i===u.l?n.state=o.NULL3:g(n,"Invalid null started with nu"+i);continue;case o.NULL3:i===u.l?(d(n,"onvalue",null),n.state=n.stack.pop()||o.VALUE):g(n,"Invalid null started with nul"+i);continue;case o.NUMBER_DECIMAL_POINT:i===u.period?(n.numberNode+=".",n.state=o.NUMBER_DIGIT):g(n,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:u._0<=i&&i<=u._9?n.numberNode+=String.fromCharCode(i):i===u.period?(-1!==n.numberNode.indexOf(".")&&g(n,"Invalid number has two dots"),n.numberNode+="."):i===u.e||i===u.E?(-1===n.numberNode.indexOf("e")&&-1===n.numberNode.indexOf("E")||g(n,"Invalid number has two exponential"),n.numberNode+="e"):i===u.plus||i===u.minus?(a!==u.e&&a!==u.E&&g(n,"Invalid symbol in number"),n.numberNode+=String.fromCharCode(i)):(b(n),r--,n.state=n.stack.pop()||o.VALUE);continue;default:g(n,"Unknown state: "+n.state)}}return n.position>=n.bufferCheckPosition&&s(n),n}p.prototype=Object.create(n.prototype,{constructor:{value:p}}),p.prototype.write=function(e){e=new Buffer(e);for(var t=0;t<e.length;t++){var n=e[t];if(this.bytes_remaining>0){for(var r=0;r<this.bytes_remaining;r++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+r]=e[r];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,t=t+r-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&n>=128){if(n>=194&&n<=223&&(this.bytes_in_sequence=2),n>=224&&n<=239&&(this.bytes_in_sequence=3),n>=240&&n<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+t>e.length){for(var i=0;i<=e.length-1-t;i++)this.temp_buffs[this.bytes_in_sequence][i]=e[t+i];return this.bytes_remaining=t+this.bytes_in_sequence-e.length,!0}this.string=e.slice(t,t+this.bytes_in_sequence).toString(),t=t+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var o=t;o<e.length;o++)if(e[o]>=128)break;this.string=e.slice(t,o).toString(),this._parser.write(this.string),this.emit("data",this.string),t=o-1}}},p.prototype.end=function(e){return e&&e.length&&this._parser.write(e.toString()),this._parser.end(),!0},p.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===i.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),n.prototype.on.call(r,e,t)},p.prototype.destroy=function(){c(this._parser),this.emit("close")}})(t)}));function j(e){var t=0,n=C(!0),r={pullAsync:function(a){return i(this,void 0,void 0,(function(){var i,u,c;return o(this,(function(o){switch(o.label){case 0:return i=e.slice(t,t+a),t+=a,[4,s(i,"text")];case 1:return u=o.sent(),c=n.write(u),r.result=c||{},[2,c]}}))}))},pullSync:function(i){var o=e.slice(t,t+i);t+=i;var a=c(o,"text"),u=n.write(a);return r.result=u||{},u},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function C(e){var t,n,r,i=N.parser(),o=0,a=[],u=!1,s=!1;return i.onopenobject=function(i){var u={incomplete:!0};t||(t=u),n&&(a.push([r,n,s]),e&&(s?n.push(u):n[r]=u)),n=u,r=i,s=!1,++o},i.onkey=function(e){return r=e},i.onvalue=function(e){return s?n.push(e):n[r]=e},i.oncloseobject=function(){var t;if(delete n.incomplete,r=null,0===--o)u=!0;else{var i=n;t=a.pop(),r=t[0],n=t[1],s=t[2],e||(s?n.push(i):n[r]=i)}},i.onopenarray=function(){var i=[];i.incomplete=!0,t||(t=i),n&&(a.push([r,n,s]),e&&(s?n.push(i):n[r]=i)),n=i,s=!0,r=null,++o},i.onclosearray=function(){var t;if(delete n.incomplete,r=null,0===--o)u=!0;else{var i=n;t=a.pop(),r=t[0],n=t[1],s=t[2],e||(s?n.push(i):n[r]=i)}},{write:function(e){return i.write(e),t},done:function(){return u}}}var B=1024;function I(e,t){return i(this,void 0,void 0,(function(){var n,i,a,s;return o(this,(function(o){switch(o.label){case 0:return t=t||{},n=t.chunkSizeBytes||1024*B,[4,D(e,n)];case 1:return i=o.sent(),a=i.result.data,s=new r(a.databaseName),s.version(a.databaseVersion).stores(u(a)),[4,K(s,i,t)];case 2:return o.sent(),[2,s]}}))}))}function R(e){return i(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:t=j(e),n.label=1;case 1:return t.eof()?[3,3]:[4,t.pullAsync(5120)];case 2:return n.sent(),t.result.data&&t.result.data.data?(delete t.result.data.data,[3,3]):[3,1];case 3:return[2,t.result]}}))}))}function K(e,t,n){return i(this,void 0,void 0,(function(){function a(){return i(this,void 0,void 0,(function(){var t,i,a,c,d;return o(this,(function(y){switch(y.label){case 0:t=function(t){var i,a,u,s,c,l,d,y,v,b,m,g;return o(this,(function(o){switch(o.label){case 0:if(!t.rows)return[2,"break"];if(!t.rows.incomplete&&0===t.rows.length)return[2,"continue"];if(h&&r.ignoreTransaction((function(){return h(p)})),i=t.tableName,a=e.table(i),u=f.tables.filter((function(e){return e.name===i}))[0].schema,!a){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table "+t.tableName+" is missing in installed database")}if(!n.acceptChangedPrimaryKey&&u.split(",")[0]!=a.schema.primKey.src)throw new Error("Primary key differs for table "+t.tableName+". ");for(s=t.rows,c=[],l=0;l<s.length;l++){if(d=s[l],d.incomplete)break;c.push(E.revive(d))}return y=n.filter,v=y?t.inbound?c.filter((function(e){return y(i,e)})):c.filter((function(e){var t=e[0],n=e[1];return y(i,n,t)})):c,b=t.inbound?[void 0,v]:[v.map((function(e){return e[0]})),c.map((function(e){return e[1]}))],m=b[0],g=b[1],n.overwriteValues?[4,a.bulkPut(g,m)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,a.bulkAdd(g,m)];case 3:o.sent(),o.label=4;case 4:return p.completedRows+=c.length,c.incomplete||(p.completedTables+=1),s.splice(0,c.length),[2]}}))},i=0,a=f.data,y.label=1;case 1:return i<a.length?(c=a[i],[5,t(c)]):[3,4];case 2:if(d=y.sent(),"break"===d)return[3,4];y.label=3;case 3:return i++,[3,1];case 4:while(f.data.length>0&&f.data[0].rows&&!f.data[0].rows.incomplete)f.data.splice(0,1);return s.done()||s.eof()?[3,8]:l?(s.pullSync(u),[3,7]):[3,5];case 5:return[4,r.waitFor(s.pullAsync(u))];case 6:y.sent(),y.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}}))}))}var u,s,c,l,f,h,p,d,y,v;return o(this,(function(i){switch(i.label){case 0:return n=n||{},u=n.chunkSizeBytes||1024*B,[4,D(t,u)];case 1:if(s=i.sent(),c=s.result,l="FileReaderSync"in self,f=c.data,!n.acceptNameDiff&&e.name!==f.databaseName)throw new Error("Name differs. Current database name is "+e.name+" but export is "+f.databaseName);if(!n.acceptVersionDiff&&e.verno!==f.databaseVersion)throw new Error("Database version differs. Current database is in version "+e.verno+" but export is "+f.databaseVersion);if(h=n.progressCallback,p={done:!1,completedRows:0,completedTables:0,totalRows:f.tables.reduce((function(e,t){return e+t.rowCount}),0),totalTables:f.tables.length},h&&r.ignoreTransaction((function(){return h(p)})),!n.clearTablesBeforeImport)return[3,5];d=0,y=e.tables,i.label=2;case 2:return d<y.length?(v=y[d],[4,v.clear()]):[3,5];case 3:i.sent(),i.label=4;case 4:return d++,[3,2];case 5:return n.noTransaction?[4,a()]:[3,7];case 6:return i.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,a)];case 8:i.sent(),i.label=9;case 9:return p.done=!0,h&&r.ignoreTransaction((function(){return h(p)})),[2]}}))}))}function D(e,t){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:n="slice"in e?j(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||"dexie"!=r.formatName)throw new Error("Given file is not a dexie export");if(r.formatVersion>P)throw new Error("Format version "+r.formatVersion+" not supported");if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}}))}))}r.prototype.export=function(e){return k(this,e)},r.prototype.import=function(e,t){return K(this,e,t)},r.import=function(e,t){return I(e,t)};var U=function(){throw new Error("This addon extends Dexie.prototype globally and does not have be included in Dexie constructor's addons options.")};t["default"]=U},cd3b:function(e,t,n){(function(t){(function(t,n){e.exports=n()})(0,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.apply(this,arguments)};function n(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:t,i=Object.keys,o=Array.isArray;function a(e,t){return"object"!==typeof t||i(t).forEach((function(n){e[n]=t[n]})),e}"undefined"===typeof Promise||r.Promise||(r.Promise=Promise);var u=Object.getPrototypeOf,s={}.hasOwnProperty;function c(e,t){return s.call(e,t)}function l(e,t){"function"===typeof t&&(t=t(u(e))),("undefined"===typeof Reflect?i:Reflect.ownKeys)(t).forEach((function(n){h(e,n,t[n])}))}var f=Object.defineProperty;function h(e,t,n,r){f(e,t,a(n&&c(n,"get")&&"function"===typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:l.bind(null,e.prototype)}}}}var d=Object.getOwnPropertyDescriptor;function y(e,t){var n,r=d(e,t);return r||(n=u(e))&&y(n,t)}var v=[].slice;function b(e,t,n){return v.call(e,t,n)}function m(e,t){return t(e)}function g(e){if(!e)throw new Error("Assertion Failed")}function w(e){r.setImmediate?setImmediate(e):setTimeout(e,0)}function _(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function E(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function O(e,t){if(c(e,t))return e[t];if(!t)return e;if("string"!==typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=O(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var u=e[t.substr(0,a)];return void 0===u?void 0:O(u,t.substr(a+1))}}function A(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!==typeof t&&"length"in t){g("string"!==typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)A(e,t[r],n[r])}else{var a=t.indexOf(".");if(-1!==a){var u=t.substr(0,a),s=t.substr(a+1);if(""===s)void 0===n?o(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n;else{var l=e[u];l&&c(e,u)||(l=e[u]={}),A(l,s,n)}}else void 0===n?o(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function x(e,t){"string"===typeof t?A(e,t,void 0):"length"in t&&[].map.call(t,(function(t){A(e,t,void 0)}))}function S(e){var t={};for(var n in e)c(e,n)&&(t[n]=e[n]);return t}var k=[].concat;function P(e){return k.apply([],e)}var T="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(P([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return r[e]})),N=T.map((function(e){return r[e]}));_(T,(function(e){return[e,!0]}));var j=null;function C(e){j="undefined"!==typeof WeakMap&&new WeakMap;var t=B(e);return j=null,t}function B(e){if(!e||"object"!==typeof e)return e;var t=j&&j.get(e);if(t)return t;if(o(e)){t=[],j&&j.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(B(e[n]))}else if(N.indexOf(e.constructor)>=0)t=e;else{var i=u(e);for(var a in t=i===Object.prototype?{}:Object.create(i),j&&j.set(e,t),e)c(e,a)&&(t[a]=B(e[a]))}return t}var I={}.toString;function R(e){return I.call(e).slice(8,-1)}var K="undefined"!==typeof Symbol?Symbol.iterator:"@@iterator",D="symbol"===typeof K?function(e){var t;return null!=e&&(t=e[K])&&t.apply(e)}:function(){return null},U={};function F(e){var t,n,r,i;if(1===arguments.length){if(o(e))return e.slice();if(this===U&&"string"===typeof e)return[e];if(i=D(e)){n=[];while(r=i.next(),!r.done)n.push(r.value);return n}if(null==e)return[e];if(t=e.length,"number"===typeof t){n=new Array(t);while(t--)n[t]=e[t];return n}return[e]}t=arguments.length,n=new Array(t);while(t--)n[t]=arguments[t];return n}var L="undefined"!==typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},M="undefined"!==typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function q(e,t){M=e,V=t}var V=function(){return!0},Y=!new Error("").stack;function G(){if(Y)try{throw G.arguments,new Error}catch(e){return e}return new Error}function J(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(V).map((function(e){return"\n"+e})).join("")):""}var $=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],X=$.concat(z),H={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function W(e,t){this._e=G(),this.name=e,this.message=t}function Q(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function Z(e,t,n,r){this._e=G(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Q(e,t)}function ee(e,t){this._e=G(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=Q(e,t)}p(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+J(this._e,2))}},toString:function(){return this.name+": "+this.message}}),p(Z).from(W),p(ee).from(W);var te=X.reduce((function(e,t){return e[t]=t+"Error",e}),{}),ne=W,re=X.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=G(),this.name=n,e?"string"===typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"===typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=H[t]||n,this.inner=null)}return p(r).from(ne),e[t]=r,e}),{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var ie=z.reduce((function(e,t){return e[t+"Error"]=re[t],e}),{});function oe(e,t){if(!e||e instanceof W||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ie[e.name])return e;var n=new ie[e.name](t||e.message,e);return"stack"in e&&h(n,"stack",{get:function(){return this.inner.stack}}),n}var ae=X.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=re[t]),e}),{});function ue(){}function se(e){return e}function ce(e,t){return null==e||e===se?t:function(n){return t(e(n))}}function le(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function fe(e,t){return e===ue?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?le(r,this.onsuccess):r),i&&(this.onerror=this.onerror?le(i,this.onerror):i),void 0!==o?o:n}}function he(e,t){return e===ue?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?le(n,this.onsuccess):n),r&&(this.onerror=this.onerror?le(r,this.onerror):r)}}function pe(e,t){return e===ue?t:function(n){var r=e.apply(this,arguments);a(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?le(i,this.onsuccess):i),o&&(this.onerror=this.onerror?le(o,this.onerror):o),void 0===r?void 0===u?void 0:u:a(r,u)}}function de(e,t){return e===ue?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ye(e,t){return e===ue?t:function(){var n=e.apply(this,arguments);if(n&&"function"===typeof n.then){var r=this,i=arguments.length,o=new Array(i);while(i--)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}ae.ModifyError=Z,ae.DexieError=W,ae.BulkError=ee;var ve={},be=100,me=20,ge=100,we="undefined"===typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"===typeof crypto||!crypto.subtle)return[e,u(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,u(t),e]}(),_e=we[0],Ee=we[1],Oe=we[2],Ae=Ee&&Ee.then,xe=_e&&_e.constructor,Se=!!Oe,ke=!1,Pe=Oe?function(){Oe.then(We)}:r.setImmediate?setImmediate.bind(null,We):r.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){We(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(We,0)},Te=function(e,t){Ue.push([e,t]),je&&(Pe(),je=!1)},Ne=!0,je=!0,Ce=[],Be=[],Ie=null,Re=se,Ke={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{xt(e[0],e[1])}catch(t){}}))}},De=Ke,Ue=[],Fe=0,Le=[];function Me(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ue,this._lib=!1;var t=this._PSD=De;if(M&&(this._stackHolder=G(),this._prev=null,this._numPrev=0),"function"!==typeof e){if(e!==ve)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ge(this,this._value))}this._state=null,this._value=null,++t.ref,Ye(this,e)}var qe={get:function(){var e=De,t=lt;function n(n,r){var i=this,o=!e.global&&(e!==De||t!==lt),a=o&&!dt(),u=new Me((function(t,u){$e(i,new Ve(Et(n,e,o,a),Et(r,e,o,a),t,u,e))}));return M&&He(u,this),u}return n.prototype=ve,n},set:function(e){h(this,"then",e&&e.prototype===ve?qe:{get:function(){return e},set:qe.set})}};function Ve(e,t,n,r,i){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Ye(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Qe();t&&"function"===typeof t.then?Ye(e,(function(e,n){t instanceof Me?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Je(e)),n&&Ze()}}),Ge.bind(null,e))}catch(n){Ge(e,n)}}function Ge(e,t){if(Be.push(t),null===e._state){var n=e._lib&&Qe();t=Re(t),e._state=!1,e._value=t,M&&null!==t&&"object"===typeof t&&!t._promise&&E((function(){var n=y(t,"stack");t._promise=e,h(t,"stack",{get:function(){return ke?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),nt(e),Je(e),n&&Ze()}}function Je(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)$e(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Fe&&(++Fe,Te((function(){0===--Fe&&et()}),[]))}function $e(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Fe,Te(ze,[n,e,t])}else e._listeners.push(t)}function ze(e,t,n){try{Ie=t;var r,i=t._value;t._state?r=e(i):(Be.length&&(Be=[]),r=e(i),-1===Be.indexOf(i)&&rt(t)),n.resolve(r)}catch(o){n.reject(o)}finally{Ie=null,0===--Fe&&et(),--n.psd.ref||n.psd.finalize()}}function Xe(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,a=e._value;null!=a?(i=a.name||"Error",o=a.message||a,r=J(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return M&&(r=J(e._stackHolder,2),r&&-1===t.indexOf(r)&&t.push(r),e._prev&&Xe(e._prev,t,n)),t}function He(e,t){var n=t?t._numPrev+1:0;n<be&&(e._prev=t,e._numPrev=n)}function We(){Qe()&&Ze()}function Qe(){var e=Ne;return Ne=!1,je=!1,e}function Ze(){var e,t,n;do{while(Ue.length>0)for(e=Ue,Ue=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Ue.length>0);Ne=!0,je=!0}function et(){var e=Ce;Ce=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));var t=Le.slice(0),n=t.length;while(n)t[--n]()}function tt(e){function t(){e(),Le.splice(Le.indexOf(t),1)}Le.push(t),++Fe,Te((function(){0===--Fe&&et()}),[])}function nt(e){Ce.some((function(t){return t._value===e._value}))||Ce.push(e)}function rt(e){var t=Ce.length;while(t)if(Ce[--t]._value===e._value)return void Ce.splice(t,1)}function it(e){return new Me(ve,!1,e)}function ot(e,t){var n=De;return function(){var r=Qe(),i=De;try{return mt(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{mt(i,!1),r&&Ze()}}}l(Me.prototype,{then:qe,_then:function(e,t){$e(this,new Ve(null,null,e,t,De))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"===typeof t?this.then(null,(function(e){return e instanceof t?n(e):it(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):it(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),it(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{ke=!0;var e=Xe(this,[],me),t=e.join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{ke=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Me((function(r,i){var o=setTimeout((function(){return i(new re.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!==typeof Symbol&&Symbol.toStringTag&&h(Me.prototype,Symbol.toStringTag,"Dexie.Promise"),Ke.env=gt(),l(Me,{all:function(){var e=F.apply(null,arguments).map(yt);return new Me((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return Me.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Me)return e;if(e&&"function"===typeof e.then)return new Me((function(t,n){e.then(t,n)}));var t=new Me(ve,!0,e);return He(t,Ie),t},reject:it,race:function(){var e=F.apply(null,arguments).map(yt);return new Me((function(t,n){e.map((function(e){return Me.resolve(e).then(t,n)}))}))},PSD:{get:function(){return De},set:function(e){return De=e}},totalEchoes:{get:function(){return lt}},newPSD:ht,usePSD:wt,scheduler:{get:function(){return Te},set:function(e){Te=e}},rejectionMapper:{get:function(){return Re},set:function(e){Re=e}},follow:function(e,t){return new Me((function(n,r){return ht((function(t,n){var r=De;r.unhandleds=[],r.onunhandled=n,r.finalize=le((function(){var e=this;tt((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),xe&&(xe.allSettled&&h(Me,"allSettled",(function(){var e=F.apply(null,arguments).map(yt);return new Me((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return Me.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),xe.any&&"undefined"!==typeof AggregateError&&h(Me,"any",(function(){var e=F.apply(null,arguments).map(yt);return new Me((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return Me.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var at={awaits:0,echoes:0,id:0},ut=0,st=[],ct=0,lt=0,ft=0;function ht(e,t,n,r){var i=De,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++ft;var u=Ke.env;o.env=Se?{Promise:Me,PromiseProp:{value:Me,configurable:!0,writable:!0},all:Me.all,race:Me.race,allSettled:Me.allSettled,any:Me.any,resolve:Me.resolve,reject:Me.reject,nthen:Ot(u.nthen,o),gthen:Ot(u.gthen,o)}:{},t&&a(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=wt(o,e,n,r);return 0===o.ref&&o.finalize(),s}function pt(){return at.id||(at.id=++ut),++at.awaits,at.echoes+=ge,at.id}function dt(){return!!at.awaits&&(0===--at.awaits&&(at.id=0),at.echoes=at.awaits*ge,!0)}function yt(e){return at.echoes&&e&&e.constructor===xe?(pt(),e.then((function(e){return dt(),e}),(function(e){return dt(),St(e)}))):e}function vt(e){++lt,at.echoes&&0!==--at.echoes||(at.echoes=at.id=0),st.push(De),mt(e,!0)}function bt(){var e=st[st.length-1];st.pop(),mt(e,!1)}function mt(e,t){var n=De;if((t?!at.echoes||ct++&&e===De:!ct||--ct&&e===De)||_t(t?vt.bind(null,e):bt),e!==De&&(De=e,n===Ke&&(Ke.env=gt()),Se)){var i=Ke.env.Promise,o=e.env;Ee.then=o.nthen,i.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(r,"Promise",o.PromiseProp),i.all=o.all,i.race=o.race,i.resolve=o.resolve,i.reject=o.reject,o.allSettled&&(i.allSettled=o.allSettled),o.any&&(i.any=o.any))}}function gt(){var e=r.Promise;return Se?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ee.then,gthen:e.prototype.then}:{}}function wt(e,t,n,r,i){var o=De;try{return mt(e,!0),t(n,r,i)}finally{mt(o,!1)}}function _t(e){Ae.call(_e,e)}function Et(e,t,n,r){return"function"!==typeof e?e:function(){var i=De;n&&pt(),mt(t,!0);try{return e.apply(this,arguments)}finally{mt(i,!1),r&&_t(dt)}}}function Ot(e,t){return function(n,r){return e.call(this,Et(n,t),Et(r,t))}}-1===(""+Ae).indexOf("[native code]")&&(pt=dt=ue);var At="unhandledrejection";function xt(e,t){var n;try{n=t.onuncatched(e)}catch(u){}if(!1!==n)try{var i,o={promise:t,reason:e};if(r.document&&document.createEvent?(i=document.createEvent("Event"),i.initEvent(At,!0,!0),a(i,o)):r.CustomEvent&&(i=new CustomEvent(At,{detail:o}),a(i,o)),i&&r.dispatchEvent&&(dispatchEvent(i),!r.PromiseRejectionEvent&&r.onunhandledrejection))try{r.onunhandledrejection(i)}catch(s){}M&&i&&i.defaultPrevented}catch(u){}}var St=Me.reject;function kt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||De.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===te.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(e._close(),e.open().then((function(){return kt(e,t,n,r)}))):St(o)}return i._promise(t,(function(e,t){return ht((function(){return De.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(e._state.openComplete)return St(new re.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return St(new re.DatabaseClosed);e.open().catch(ue)}return e._state.dbReadyPromise.then((function(){return kt(e,t,n,r)}))}var Pt="3.2.2",Tt=String.fromCharCode(65535),Nt=-1/0,jt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ct="String expected.",Bt=[],It="undefined"!==typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Rt=It,Kt=It,Dt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Ut="__dbnames",Ft="readonly",Lt="readwrite";function Mt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var qt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Vt(e){return"string"!==typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&(t=C(t),delete t[e]),t}}var Yt=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||De.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new re.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var a=Qe();try{return r&&r.db===this.db?r===De.trans?r._promise(e,o,n):ht((function(){return r._promise(e,o,n)}),{trans:r,transless:De.transless||De}):kt(this.db,e,[this.name],o)}finally{a&&Ze()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"===typeof e)return new this.db.WhereClause(this,e);if(o(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=i(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==Tt)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));var r=this.schema.idxByName,a=this.db._deps.indexedDB;function u(e,t){try{return 0===a.cmp(e,t)}catch(n){return!1}}var s=t.reduce((function(t,n){var i=t[0],a=t[1],s=r[n],c=e[n];return[i||s,i||!s?Mt(a,s&&s.multi?function(e){var t=O(e,n);return o(t)&&t.some((function(e){return u(c,e)}))}:function(e){return u(c,O(e,n))}):a]}),[null,null]),c=s[0],l=s[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,o(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(c(t,r))try{n[r]=t[r]}catch(i){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){function e(e){a(this,e)}return this.mapToClass(e)},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=Vt(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?Me.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{A(e,o,t)}catch(n){}return t}))},e.prototype.update=function(e,t){if("object"!==typeof e||o(e))return this.where(":id").equals(e).modify(t);var n=O(e,this.schema.primKey.keyPath);if(void 0===n)return St(new re.InvalidArgument("Given object does not contain its primary key"));try{"function"!==typeof t?i(t).forEach((function(n){A(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(Sr){}return this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=Vt(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Me.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{A(e,o,t)}catch(n){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Me.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:qt})})).then((function(e){return e.numFailures?Me.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0;n=n||(i?void 0:t);var o=n?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,u=n.keyPath;if(u&&i)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=u&&a?e.map(Vt(u)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures,u=o?n:i;if(0===t)return u;throw new ee(r.name+".bulkAdd(): "+t+" of "+s+" operations failed",a)}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0;n=n||(i?void 0:t);var o=n?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,u=n.keyPath;if(u&&i)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=u&&a?e.map(Vt(u)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures,u=o?n:i;if(0===t)return u;throw new ee(r.name+".bulkPut(): "+t+" of "+s+" operations failed",a)}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new ee(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",o)}))},e}();function Gt(e){var t={},n=function(n,r){if(r){var i=arguments.length,o=new Array(i-1);while(--i)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"===typeof n)return t[n]};n.addEventType=u;for(var r=1,a=arguments.length;r<a;++r)u(arguments[r]);return n;function u(e,r,i){if("object"===typeof e)return s(e);r||(r=de),i||(i=ue);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function s(e){i(e).forEach((function(t){var n=e[t];if(o(n))u(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new re.InvalidArgument("Invalid event config");var r=u(t,se,(function(){var e=arguments.length,t=new Array(e);while(e--)t[e]=arguments[e];r.subscribers.forEach((function(e){w((function(){e.apply(null,t)}))}))}))}}))}}function Jt(e,t){return p(t).from({prototype:e}),t}function $t(e){return Jt(Yt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Gt(null,{creating:[fe,ue],reading:[ce,se],updating:[pe,ue],deleting:[he,ue]})}))}function zt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Xt(e,t){e.filter=Mt(e.filter,t)}function Ht(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Mt(r(),t())}:t,e.justLimit=n&&!r}function Wt(e,t){e.isMatch=Mt(e.isMatch,t)}function Qt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new re.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Zt(e,t,n){var r=Qt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function en(e,t,n,r){var i=e.replayFilter?Mt(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,u=""+a;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(a)),c(o,u)||(o[u]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),tn(Zt(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return tn(Zt(e,r,n),Mt(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function tn(e,t,n,r){var i=r?function(e,t,i){return n(r(e),t,i)}:n,o=ot(i);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=ue}),(function(t){e.fail(t),n=ue}))||o(e.value,e,(function(e){return n=e})),n()}))}))}function nn(e,t){try{var n=an(e),r=an(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return on(un(e),un(t));case"Array":return rn(e,t)}}catch(Sr){}return NaN}function rn(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=nn(e[o],t[o]);if(0!==a)return a}return n===r?0:n<r?-1:1}function on(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function an(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=R(e);return"ArrayBuffer"===n?"binary":n}function un(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var sn=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,St.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,St.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Mt(t.algorithm,e)},e.prototype._iterate=function(e,t){return en(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&a(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return en(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(zt(n,!0))return r.count({trans:e,query:{index:Qt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return en(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function u(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(u)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&zt(n,!0)&&n.limit>0){var r=n.valueMapper,i=Qt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return en(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,zt(t)?Ht(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):Ht(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ht(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return Xt(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return Xt(this._ctx,(function(t){return e(t.value)})),Wt(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&zt(t,!0)&&t.limit>0)return this._read((function(e){var n=Qt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){var t=e.result;return t})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Xt(this._ctx,(function(e){var t=e.primaryKey.toString(),r=c(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var o;if("function"===typeof e)o=e;else{var a=i(e),u=a.length;o=function(t){for(var n=!1,r=0;r<u;++r){var i=a[r],o=e[i];O(t,i)!==o&&(A(t,i,o),n=!0)}return n}}var s=n.table.core,c=s.schema.primaryKey,l=c.outbound,f=c.extractKey,h=t.db._options.modifyChunkSize||200,p=[],d=0,y=[],v=function(e,t){var n=t.failures,r=t.numFailures;d+=e-r;for(var o=0,a=i(n);o<a.length;o++){var u=a[o];p.push(n[u])}};return t.clone().primaryKeys().then((function(t){var i=function(a){var u=Math.min(h,t.length-a);return s.getMany({trans:r,keys:t.slice(a,a+u),cache:"immutable"}).then((function(c){for(var p=[],d=[],y=l?[]:null,b=[],m=0;m<u;++m){var g=c[m],w={value:C(g),primKey:t[a+m]};!1!==o.call(w,w.value,w)&&(null==w.value?b.push(t[a+m]):l||0===nn(f(g),f(w.value))?(d.push(w.value),l&&y.push(t[a+m])):(b.push(t[a+m]),p.push(w.value)))}var _=zt(n)&&n.limit===1/0&&("function"!==typeof e||e===cn)&&{index:n.index,range:n.range};return Promise.resolve(p.length>0&&s.mutate({trans:r,type:"add",values:p}).then((function(e){for(var t in e.failures)b.splice(parseInt(t),1);v(p.length,e)}))).then((function(){return(d.length>0||_&&"object"===typeof e)&&s.mutate({trans:r,type:"put",keys:y,values:d,criteria:_,changeSpec:"function"!==typeof e&&e}).then((function(e){return v(d.length,e)}))})).then((function(){return(b.length>0||_&&e===cn)&&s.mutate({trans:r,type:"delete",keys:b,criteria:_}).then((function(e){return v(b.length,e)}))})).then((function(){return t.length>a+u&&i(a+h)}))}))};return i(0).then((function(){if(p.length>0)throw new Z("Error modifying one or more objects",p,d,y);return t.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return zt(e)&&(e.isPrimKey&&!Kt||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new Z("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify(cn)},e}(),cn=function(e,t){return t.value=null};function ln(e){return Jt(sn.prototype,(function(t,n){this.db=e;var r=qt,i=null;if(n)try{r=n()}catch(s){i=s}var o=t._ctx,a=o.table,u=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:u!==se?u:null}}))}function fn(e,t){return e<t?-1:e===t?0:1}function hn(e,t){return e>t?-1:e===t?0:1}function pn(e,t,n){var r=e instanceof _n?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function dn(e){return new e.Collection(e,(function(){return wn("")})).limit(0)}function yn(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function vn(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function bn(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),u=-1,s=0;s<a;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],c)<0&&(u=s)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function mn(e,t,n,r){var i,o,a,u,s,c,l,f=n.length;if(!n.every((function(e){return"string"===typeof e})))return pn(e,Ct);function h(e){i=yn(e),o=vn(e),a="next"===e?fn:hn;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));u=t.map((function(e){return e.upper})),s=t.map((function(e){return e.lower})),c=e,l="next"===e?"":r}h("next");var p=new e.Collection(e,(function(){return gn(u[0],s[f-1]+r)}));p._ondirectionchange=function(e){h(e)};var d=0;return p._addAlgorithm((function(e,n,r){var i=e.key;if("string"!==typeof i)return!1;var h=o(i);if(t(h,s,d))return!0;for(var p=null,y=d;y<f;++y){var v=bn(i,h,u[y],s[y],a,c);null===v&&null===p?d=y+1:(null===p||a(p,v)>0)&&(p=v)}return n(null!==p?function(){e.continue(p+l)}:r),!1})),p}function gn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function wn(e){return{type:1,lower:e,upper:e}}var _n=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?dn(this):new this.Collection(this,(function(){return gn(e,t,!n,!r)}))}catch(i){return pn(this,jt)}},e.prototype.equals=function(e){return null==e?pn(this,jt):new this.Collection(this,(function(){return wn(e)}))},e.prototype.above=function(e){return null==e?pn(this,jt):new this.Collection(this,(function(){return gn(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?pn(this,jt):new this.Collection(this,(function(){return gn(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?pn(this,jt):new this.Collection(this,(function(){return gn(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?pn(this,jt):new this.Collection(this,(function(){return gn(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!==typeof e?pn(this,Ct):this.between(e,e+Tt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):mn(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Tt)},e.prototype.equalsIgnoreCase=function(e){return mn(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=F.apply(U,arguments);return 0===e.length?dn(this):mn(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=F.apply(U,arguments);return 0===e.length?dn(this):mn(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Tt)},e.prototype.anyOf=function(){var e=this,t=F.apply(U,arguments),n=this._cmp;try{t.sort(n)}catch(o){return pn(this,jt)}if(0===t.length)return dn(this);var r=new this.Collection(this,(function(){return gn(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){var a=e.key;while(n(a,t[i])>0)if(++i,i===t.length)return r(o),!1;return 0===n(a,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[Nt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=F.apply(U,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(n){return pn(this,jt)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Nt,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,u=this._max;if(0===e.length)return dn(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return pn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var s=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;function l(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=a(o[0],t[0]),o[1]=u(o[1],t[1]);break}}return n===i&&e.push(t),e}var f,h=i;function p(e,t){return h(e[0],t[0])}try{f=e.reduce(l,[]),f.sort(p)}catch(w){return pn(this,jt)}var d=0,y=c?function(e){return i(e,f[d][1])>0}:function(e){return i(e,f[d][1])>=0},v=s?function(e){return o(e,f[d][0])>0}:function(e){return o(e,f[d][0])>=0};function b(e){return!y(e)&&!v(e)}var m=y,g=new this.Collection(this,(function(){return gn(f[0][0],f[f.length-1][1],!s,!c)}));return g._ondirectionchange=function(e){"next"===e?(m=y,h=i):(m=v,h=o),f.sort(p)},g._addAlgorithm((function(e,t,r){var o=e.key;while(m(o))if(++d,d===f.length)return t(r),!1;return!!b(o)||(0===n._cmp(o,f[d][1])||0===n._cmp(o,f[d][0])||t((function(){h===i?e.continue(f[d][0]):e.continue(f[d][1])})),!1)})),g},e.prototype.startsWithAnyOf=function(){var e=F.apply(U,arguments);return e.every((function(e){return"string"===typeof e}))?0===e.length?dn(this):this.inAnyRange(e.map((function(e){return[e,e+Tt]}))):pn(this,"startsWithAnyOf() only works with strings")},e}();function En(e){return Jt(_n.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new re.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}function On(e){return ot((function(t){return An(t),e(t.target.error),!1}))}function An(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var xn="storagemutated",Sn="x-storagemutated-1",kn=Gt(null,xn),Pn=function(){function e(){}return e.prototype._lock=function(){return g(!De.global),++this._reculock,1!==this._reculock||De.global||(De.lockOwnerFor=this),this},e.prototype._unlock=function(){if(g(!De.global),0===--this._reculock){De.global||(De.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var e=this._blockedFuncs.shift();try{wt(e[1],e[0])}catch(t){}}}return this},e.prototype._locked=function(){return this._reculock&&De.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(g(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new re.DatabaseClosed(r);case"MissingAPIError":throw new re.MissingAPI(r.message,r);default:throw new re.OpenFailed(r)}if(!this.active)throw new re.TransactionInactive;return g(null===this._completion._state),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=ot((function(n){An(n),t._reject(e.error)})),e.onabort=ot((function(n){An(n),t.active&&t._reject(new re.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=ot((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&kn.storagemutated.fire(e["mutatedParts"])})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return St(new re.ReadOnly("Transaction is readonly"));if(!this.active)return St(new re.TransactionInactive);if(this._locked())return new Me((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},De])}));if(n)return ht((function(){var e=new Me((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Me((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Me.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);(function e(){++t._spinCount;while(t._waitingQueue.length)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)})()}var i=t._waitingFor;return new Me((function(e,r){n.then((function(n){return t._waitingQueue.push(ot(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(ot(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];var n=this.schema[e];if(!n)throw new re.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function Tn(e){return Jt(Pn.prototype,(function(t,n,r,i,o){var a=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Gt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Me((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),St(e)}))}))}function Nn(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+jn(t)}}function jn(e){return"string"===typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Cn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:_(n,(function(e){return[e.name,e]}))}}function Bn(e){return 1===e.length?e[0]:e}var In=function(e){try{return e.only([[]]),In=function(){return[[]]},[[]]}catch(t){return In=function(){return Tt},Tt}};function Rn(e){return null==e?function(){}:"string"===typeof e?Kn(e):function(t){return O(t,e)}}function Kn(e){var t=e.split(".");return 1===t.length?function(t){return t[e]}:function(t){return O(t,e)}}function Dn(e){return[].slice.call(e)}var Un=0;function Fn(e){return null==e?":id":"string"===typeof e?e:"["+e.join("+")+"]"}function Ln(e,t,n){function r(e,t){var n=Dn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=o(t),i=null==t,a={},u={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Rn(t)},indexes:Dn(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,u=o(i),s={name:t,compound:u,keyPath:i,unique:n,multiEntry:r,extractKey:Rn(i)};return a[Fn(i)]=s,s})),getIndexByKeyPath:function(e){return a[Fn(e)]}};return a[":id"]=u.primaryKey,null!=t&&(a[Fn(t)]=u.primaryKey),u}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!==typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen,a=void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o);return a}function a(e){var t=e.name;function n(e){var n=e.trans,r=e.type,o=e.keys,a=e.values,u=e.range;return new Promise((function(e,s){e=ot(e);var c=n.objectStore(t),l=null==c.keyPath,f="put"===r||"add"===r;if(!f&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);var h,p=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var d=[],y=[],v=0,b=function(e){++v,An(e)};if("deleteRange"===r){if(4===u.type)return e({numFailures:v,failures:y,results:[],lastResult:void 0});3===u.type?d.push(h=c.clear()):d.push(h=c.delete(i(u)))}else{var m=f?l?[a,o]:[a,null]:[o,null],g=m[0],w=m[1];if(f)for(var _=0;_<p;++_)d.push(h=w&&void 0!==w[_]?c[r](g[_],w[_]):c[r](g[_])),h.onerror=b;else for(_=0;_<p;++_)d.push(h=c[r](g[_])),h.onerror=b}var E=function(t){var n=t.target.result;d.forEach((function(e,t){return null!=e.error&&(y[t]=e.error)})),e({numFailures:v,failures:y,results:"delete"===r?o:d.map((function(e){return e.result})),lastResult:n})};h.onerror=function(e){b(e),E(e)},h.onsuccess=E}))}function r(e){var n=e.trans,r=e.values,o=e.query,a=e.reverse,u=e.unique;return new Promise((function(e,s){e=ot(e);var c=o.index,l=o.range,f=n.objectStore(t),h=c.isPrimaryKey?f:f.index(c.name),p=a?u?"prevunique":"prev":u?"nextunique":"next",d=r||!("openKeyCursor"in h)?h.openCursor(i(l),p):h.openKeyCursor(i(l),p);d.onerror=On(s),d.onsuccess=ot((function(t){var r=d.result;if(r){r.___id=++Un,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var a=r.advance.bind(r),u=function(){throw new Error("Cursor not started")},c=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=u,r.fail=ot(s),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=ot(e),d.onerror=On(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=c,e(t)}})),n=function(){if(d.result)try{e()}catch(t){r.fail(t)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return d.onsuccess=ot((function(e){d.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=a,n(),t},e(r)}else e(null)}),s)}))}function o(e){return function(n){return new Promise((function(r,o){r=ot(r);var a=n.trans,u=n.values,s=n.limit,c=n.query,l=s===1/0?void 0:s,f=c.index,h=c.range,p=a.objectStore(t),d=f.isPrimaryKey?p:p.index(f.name),y=i(h);if(0===s)return r({result:[]});if(e){var v=u?d.getAll(y,l):d.getAllKeys(y,l);v.onsuccess=function(e){return r({result:e.target.result})},v.onerror=On(o)}else{var b=0,m=u||!("openKeyCursor"in d)?d.openCursor(y):d.openKeyCursor(y),g=[];m.onsuccess=function(e){var t=m.result;return t?(g.push(u?t.value:t.primaryKey),++b===s?r({result:g}):void t.continue()):r({result:g})},m.onerror=On(o)}}))}}return{name:t,schema:e,mutate:n,getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=ot(e);for(var o,a=n.objectStore(t),u=r.length,s=new Array(u),c=0,l=0,f=function(t){var n=t.target;s[n._pos]=n.result,++l===c&&e(s)},h=On(i),p=0;p<u;++p){var d=r[p];null!=d&&(o=a.get(r[p]),o._pos=p,o.onsuccess=f,o.onerror=h,++c)}0===c&&e(s)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=ot(e);var o=n.objectStore(t),a=o.get(r);a.onsuccess=function(t){return e(t.target.result)},a.onerror=On(i)}))},query:o(c),openCursor:r,count:function(e){var n=e.query,r=e.trans,o=n.index,a=n.range;return new Promise((function(e,n){var u=r.objectStore(t),s=o.isPrimaryKey?u:u.index(o.name),c=i(a),l=c?s.count(c):s.count();l.onsuccess=ot((function(t){return e(t.target.result)})),l.onerror=On(n)}))}}}var u=r(e,n),s=u.schema,c=u.hasGetAll,l=s.tables.map((function(e){return a(e)})),f={};return l.forEach((function(e){return f[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){var t=f[e];if(!t)throw new Error("Table '"+e+"' not found");return f[e]},MIN_KEY:-1/0,MAX_KEY:In(t),schema:s}}function Mn(t,n){return n.reduce((function(t,n){var r=n.create;return e(e({},t),r(t))}),t)}function qn(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=Mn(Ln(t,i,r),e.dbcore);return{dbcore:o}}function Vn(e,t){var n=e._novip,r=t.db,i=qn(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach((function(e){var t=e.name;n.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function Yn(e,t,n,r){var i=e._novip;n.forEach((function(e){var n=r[e];t.forEach((function(t){var r=y(t,e);(!r||"value"in r&&void 0===r.value)&&(t===i.Transaction.prototype||t instanceof i.Transaction?h(t,e,{get:function(){return this.table(e)},set:function(t){f(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new i.Table(e,n))}))}))}function Gn(e,t){var n=e._novip;t.forEach((function(e){for(var t in e)e[t]instanceof n.Table&&delete e[t]}))}function Jn(e,t){return e._cfg.version-t._cfg.version}function $n(e,t,n,r){var o=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,o);a.create(n),a._completion.catch(r);var u=a._reject.bind(a),s=De.transless||De;ht((function(){De.trans=a,De.transless=s,0===t?(i(o).forEach((function(e){Hn(n,e,o[e].primKey,o[e].indexes)})),Vn(e,n),Me.follow((function(){return e.on.populate.fire(a)})).catch(u)):zn(e,t,a,n).catch(u)}))}function zn(e,t,n,r){var o=e._novip,a=[],u=o._versions,s=o._dbSchema=er(o,o.idbdb,r),c=!1,l=u.filter((function(e){return e._cfg.version>=t}));function f(){return a.length?Me.resolve(a.shift()(n.idbtrans)).then(f):Me.resolve()}return l.forEach((function(e){a.push((function(){var a=s,u=e._cfg.dbschema;rr(o,a,r),rr(o,u,r),s=o._dbSchema=u;var l=Xn(a,u);l.add.forEach((function(e){Hn(r,e[0],e[1].primKey,e[1].indexes)})),l.change.forEach((function(e){if(e.recreate)throw new re.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return Zn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Zn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var f=e._cfg.contentUpgrade;if(f&&e._cfg.version>t){Vn(o,r),n._memoizedTables={},c=!0;var h=S(u);l.del.forEach((function(e){h[e]=a[e]})),Gn(o,[o.Transaction.prototype]),Yn(o,[o.Transaction.prototype],i(h),h),n.schema=h;var p,d=L(f);d&&pt();var y=Me.follow((function(){if(p=f(n),p&&d){var e=dt.bind(null,null);p.then(e,e)}}));return p&&"function"===typeof p.then?Me.resolve(p):y.then((function(){return p}))}})),a.push((function(t){if(!c||!Rt){var r=e._cfg.dbschema;Qn(r,t)}Gn(o,[o.Transaction.prototype]),Yn(o,[o.Transaction.prototype],o._storeNames,o._dbSchema),n.schema=o._dbSchema}))})),f().then((function(){Wn(s,r)}))}function Xn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!==""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!It)a.recreate=!0,r.change.push(a);else{var u=i.idxByName,s=o.idxByName,c=void 0;for(c in u)s[c]||a.del.push(c);for(c in s){var l=u[c],f=s[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,o])}return r}function Hn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return Zn(i,e)})),i}function Wn(e,t){i(e).forEach((function(n){t.db.objectStoreNames.contains(n)||Hn(t,n,e[n].primKey,e[n].indexes)}))}function Qn(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return null==e[n]&&t.db.deleteObjectStore(n)}))}function Zn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function er(e,t,n){var r={},i=b(t.objectStoreNames,0);return i.forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,o=Nn(jn(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!==typeof i,!0),a=[],u=0;u<t.indexNames.length;++u){var s=t.index(t.indexNames[u]);i=s.keyPath;var c=Nn(s.name,i,!!s.unique,!!s.multiEntry,!1,i&&"string"!==typeof i,!1);a.push(c)}r[e]=Cn(e,o,a)})),r}function tr(e,t,n){var r=e._novip;r.verno=t.version/10;var o=r._dbSchema=er(r,t,n);r._storeNames=b(t.objectStoreNames,0),Yn(r,[r._allTables],i(o),o)}function nr(e,t){var n=er(e,e.idbdb,t),r=Xn(n,e._dbSchema);return!(r.add.length||r.change.some((function(e){return e.add.length||e.change.length})))}function rr(e,t,n){for(var i=e._novip,o=n.db.objectStoreNames,a=0;a<o.length;++a){var u=o[a],s=n.objectStore(u);i._hasGetAll="getAll"in s;for(var c=0;c<s.indexNames.length;++c){var l=s.indexNames[c],f=s.index(l).keyPath,h="string"===typeof f?f:"["+b(f).join("+")+"]";if(t[u]){var p=t[u].idxByName[h];p&&(p.name=l,delete t[u].idxByName[h],t[u].idxByName[l]=p)}}}"undefined"!==typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function ir(e){return e.split(",").map((function(e,t){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Nn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(r),0===t)}))}var or=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){i(e).forEach((function(n){if(null!==e[n]){var r=ir(e[n]),i=r.shift();if(i.multi)throw new re.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")})),t[n]=Cn(n,i,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e;var n=t._versions,r={},o={};return n.forEach((function(e){a(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)})),t._dbSchema=o,Gn(t,[t._allTables,t,t.Transaction.prototype]),Yn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(o),o),t._storeNames=i(o),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ye(this._cfg.contentUpgrade||ue,e),this},e}();function ar(e){return Jt(or.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}function ur(e,t){var n=e["_dbNamesDB"];return n||(n=e["_dbNamesDB"]=new Fr(Ut,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function sr(e){return e&&"function"===typeof e.databases}function cr(e){var t=e.indexedDB,n=e.IDBKeyRange;return sr(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Ut}))})):ur(t,n).toCollection().primaryKeys()}function lr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!sr(n)&&t!==Ut&&ur(n,r).put({name:t}).catch(ue)}function fr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!sr(n)&&t!==Ut&&ur(n,r).delete(t).catch(ue)}function hr(e){return ht((function(){return De.letThrough=!0,e()}))}function pr(){var e,t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);return t&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function dr(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?St(t.dbOpenError):e}));M&&(t.openCanceller._stackHolder=G()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new re.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,u=!1;return Me.race([r,("undefined"===typeof navigator?Me.resolve():pr()).then((function(){return new Me((function(r,o){if(i(),!n)throw new re.MissingAPI;var s=e.name,c=t.autoSchema?n.open(s):n.open(s,Math.round(10*e.verno));if(!c)throw new re.MissingAPI;c.onerror=On(o),c.onblocked=ot(e._fireOnBlocked),c.onupgradeneeded=ot((function(r){if(a=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=An,a.abort(),c.result.close();var i=n.deleteDatabase(s);i.onsuccess=i.onerror=ot((function(){o(new re.NoSuchDatabase("Database "+s+" doesnt exist"))}))}else{a.onerror=On(o);var l=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;u=l<1,e._novip.idbdb=c.result,$n(e,l/10,a,o)}}),o),c.onsuccess=ot((function(){a=null;var n=e._novip.idbdb=c.result,i=b(n.objectStoreNames);if(i.length>0)try{var o=n.transaction(Bn(i),"readonly");t.autoSchema?tr(e,n,o):(rr(e,e._dbSchema,o),nr(e,o)),Vn(e,o)}catch(l){}Bt.push(e),n.onversionchange=ot((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=ot((function(t){e.on("close").fire(t)})),u&&lr(e._deps,s),r()}),o)}))}))]).then((function(){return i(),t.onReadyBeingFired=[],Me.resolve(hr((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(ye,ue);return t.onReadyBeingFired=[],Me.resolve(hr((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((function(){return e})).catch((function(n){t.dbOpenError=n;try{a&&a.abort()}catch(Sr){}return r===t.openCanceller&&e._close(),St(n)})).finally((function(){t.openComplete=!0,o()}))}function yr(e){var t=function(t){return e.next(t)},n=function(t){return e.throw(t)},r=a(t),i=a(n);function a(e){return function(t){var n=e(t),a=n.value;return n.done?a:a&&"function"===typeof a.then?a.then(r,i):o(a)?Promise.all(a).then(r,i):r(a)}}return a(t)()}function vr(e,t,n){var r=arguments.length;if(r<2)throw new re.InvalidArgument("Too few arguments");var i=new Array(r-1);while(--r)i[r-1]=arguments[r];n=i.pop();var o=P(i);return[e,o,n]}function br(e,t,n,r,i){return Me.resolve().then((function(){var o=De.transless||De,a=e._createTransaction(t,n,e._dbSchema,r),u={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===te.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(e._close(),e.open().then((function(){return br(e,t,n,null,i)}))):St(f)}var s,c=L(i);c&&pt();var l=Me.follow((function(){if(s=i.call(a,a),s)if(c){var e=dt.bind(null,null);s.then(e,e)}else"function"===typeof s.next&&"function"===typeof s.throw&&(s=yr(s))}),u);return(s&&"function"===typeof s.then?Me.resolve(s).then((function(e){return a.active?e:St(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return s}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),St(e)}))}))}function mr(e,t,n){for(var r=o(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function gr(t){return e(e({},t),{table:function(n){var r=t.table(n),i=r.schema,o={},a=[];function u(t,n,r){var i=Fn(t),s=o[i]=o[i]||[],c=null==t?0:"string"===typeof t?1:t.length,l=n>0,f=e(e({},r),{isVirtual:l,keyTail:n,keyLength:c,extractKey:Rn(t),unique:!l&&r.unique});if(s.push(f),f.isPrimaryKey||a.push(f),c>1){var h=2===c?t[0]:t.slice(0,c-1);u(h,n+1,r)}return s.sort((function(e,t){return e.keyTail-t.keyTail})),f}var s=u(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[s];for(var c=0,l=i.indexes;c<l.length;c++){var f=l[c];u(f.keyPath,0,f)}function h(e){var t=o[Fn(e)];return t&&t[0]}function p(e,n){return{type:1===e.type?2:e.type,lower:mr(e.lower,e.lowerOpen?t.MAX_KEY:t.MIN_KEY,n),lowerOpen:!0,upper:mr(e.upper,e.upperOpen?t.MIN_KEY:t.MAX_KEY,n),upperOpen:!0}}function d(t){var n=t.query.index;return n.isVirtual?e(e({},t),{query:{index:n,range:p(t.query.range,n.keyTail)}}):t}var y=e(e({},r),{schema:e(e({},i),{primaryKey:s,indexes:a,getIndexByKeyPath:h}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(e){var n=e.query.index,i=n.keyTail,o=n.isVirtual,a=n.keyLength;if(!o)return r.openCursor(e);function u(n){function r(r){null!=r?n.continue(mr(r,e.reverse?t.MAX_KEY:t.MIN_KEY,i)):e.unique?n.continue(n.key.slice(0,a).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,i)):n.continue()}var o=Object.create(n,{continue:{value:r},continuePrimaryKey:{value:function(e,r){n.continuePrimaryKey(mr(e,t.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}});return o}return r.openCursor(d(e)).then((function(e){return e&&u(e)}))}});return y}})}var wr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:gr};function _r(e,t,n,r){return n=n||{},r=r||"",i(e).forEach((function(i){if(c(t,i)){var o=e[i],a=t[i];if("object"===typeof o&&"object"===typeof a&&o&&a){var u=R(o),s=R(a);u!==s?n[r+i]=t[i]:"Object"===u?_r(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}else n[r+i]=void 0})),i(t).forEach((function(i){c(e,i)||(n[r+i]=t[i])})),n}function Er(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Or={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return e(e({},t),{table:function(r){var i=t.table(r),o=i.schema.primaryKey,a=e(e({},i),{mutate:function(t){var a=De.trans,u=a.table(r).hook,s=u.deleting,l=u.creating,f=u.updating;switch(t.type){case"add":if(l.fire===ue)break;return a._promise("readwrite",(function(){return h(t)}),!0);case"put":if(l.fire===ue&&f.fire===ue)break;return a._promise("readwrite",(function(){return h(t)}),!0);case"delete":if(s.fire===ue)break;return a._promise("readwrite",(function(){return h(t)}),!0);case"deleteRange":if(s.fire===ue)break;return a._promise("readwrite",(function(){return p(t)}),!0)}return i.mutate(t);function h(t){var r=De.trans,a=t.keys||Er(o,t);if(!a)throw new Error("Keys missing");return t="add"===t.type||"put"===t.type?e(e({},t),{keys:a}):e({},t),"delete"!==t.type&&(t.values=n([],t.values,!0)),t.keys&&(t.keys=n([],t.keys,!0)),Ar(i,t,a).then((function(e){var n=a.map((function(n,i){var a=e[i],u={onerror:null,onsuccess:null};if("delete"===t.type)s.fire.call(u,n,a,r);else if("add"===t.type||void 0===a){var h=l.fire.call(u,n,t.values[i],r);null==n&&null!=h&&(n=h,t.keys[i]=n,o.outbound||A(t.values[i],o.keyPath,n))}else{var p=_r(a,t.values[i]),d=f.fire.call(u,p,n,a,r);if(d){var y=t.values[i];Object.keys(d).forEach((function(e){c(y,e)?y[e]=d[e]:A(y,e,d[e])}))}}return u}));return i.mutate(t).then((function(r){for(var i=r.failures,o=r.results,u=r.numFailures,s=r.lastResult,c=0;c<a.length;++c){var l=o?o[c]:a[c],f=n[c];null==l?f.onerror&&f.onerror(i[c]):f.onsuccess&&f.onsuccess("put"===t.type&&e[c]?t.values[c]:l)}return{failures:i,results:o,numFailures:u,lastResult:s}})).catch((function(e){return n.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function p(e){return d(e.trans,e.range,1e4)}function d(t,n,r){return i.query({trans:t,values:!1,query:{index:o,range:n},limit:r}).then((function(i){var o=i.result;return h({type:"delete",keys:o,trans:t}).then((function(i){return i.numFailures>0?Promise.reject(i.failures[0]):o.length<r?{failures:[],numFailures:0,lastResult:void 0}:d(t,e(e({},n),{lower:o[o.length-1],lowerOpen:!0}),r)}))}))}}});return a}})}};function Ar(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function xr(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)0===nn(t.keys[i],e[o])&&(r.push(n?C(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(Sr){return null}}var Sr,kr={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var r=t.table(n);return e(e({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=xr(e.keys,e.trans["_cache"],"clone"===e.cache);return t?Me.resolve(t):r.getMany(e).then((function(t){return e.trans["_cache"]={keys:e.keys,values:"clone"===e.cache?C(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans["_cache"]=null),r.mutate(e)}})}}}};function Pr(e){return!("from"in e)}var Tr=function(e,t){if(!this){var n=new Tr;return e&&"d"in e&&a(n,e),n}a(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Nr(e,t,n){var r=nn(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Pr(e))return a(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(nn(n,e.from)<0)return i?Nr(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ir(e);if(nn(t,e.to)>0)return o?Nr(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ir(e);nn(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),nn(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var u=!e.r;i&&!e.l&&jr(e,i),o&&u&&jr(e,o)}}function jr(e,t){function n(e,t){var r=t.from,i=t.to,o=t.l,a=t.r;Nr(e,r,i),o&&n(e,o),a&&n(e,a)}Pr(t)||n(e,t)}function Cr(e,t){var n=Br(t),r=n.next();if(r.done)return!1;var i=r.value,o=Br(e),a=o.next(i.from),u=a.value;while(!r.done&&!a.done){if(nn(u.from,i.to)<=0&&nn(u.to,i.from)>=0)return!0;nn(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(a=o.next(i.from)).value}return!1}function Br(e){var t=Pr(e)?null:{s:0,n:e};return{next:function(e){var n=arguments.length>0;while(t)switch(t.s){case 0:if(t.s=1,n)while(t.n.l&&nn(e,t.n.from)<0)t={up:t,n:t.n.l,s:1};else while(t.n.l)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||nn(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ir(t){var n,r,i=((null===(n=t.r)||void 0===n?void 0:n.d)||0)-((null===(r=t.l)||void 0===r?void 0:r.d)||0),o=i>1?"r":i<-1?"l":"";if(o){var a="r"===o?"l":"r",u=e({},t),s=t[o];t.from=s.from,t.to=s.to,t[o]=s[o],u[o]=s[a],t[a]=u,u.d=Rr(u)}t.d=Rr(t)}function Rr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}l(Tr.prototype,(Sr={add:function(e){return jr(this,e),this},addKey:function(e){return Nr(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return Nr(t,e,e)})),this}},Sr[K]=function(){return Br(this)},Sr));var Kr={stack:"dbcore",level:0,create:function(t){var n=t.schema.name,r=new Tr(t.MIN_KEY,t.MAX_KEY);return e(e({},t),{table:function(a){var u=t.table(a),s=u.schema,c=s.primaryKey,l=c.extractKey,f=c.outbound,h=e(e({},u),{mutate:function(e){var t=e.trans,i=t.mutatedParts||(t.mutatedParts={}),c=function(e){var t="idb://"+n+"/"+a+"/"+e;return i[t]||(i[t]=new Tr)},l=c(""),f=c(":dels"),h=e.type,p="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],d=p[0],y=p[1],v=e.trans["_cache"];return u.mutate(e).then((function(e){if(o(d)){"delete"!==h&&(d=e.results),l.addKeys(d);var t=xr(d,v);t||"add"===h||f.addKeys(d),(t||y)&&Dr(c,s,t,y)}else if(d){var n={from:d.lower,to:d.upper};f.add(n),l.add(n)}else l.add(r),f.add(r),s.indexes.forEach((function(e){return c(e.name).add(r)}));return e}))}}),p=function(e){var n,r,i=e.query,o=i.index,a=i.range;return[o,new Tr(null!==(n=a.lower)&&void 0!==n?n:t.MIN_KEY,null!==(r=a.upper)&&void 0!==r?r:t.MAX_KEY)]},d={get:function(e){return[c,new Tr(e.key)]},getMany:function(e){return[c,(new Tr).addKeys(e.keys)]},count:p,query:p,openCursor:p};return i(d).forEach((function(t){h[t]=function(i){var o=De.subscr;if(o){var s=function(e){var t="idb://"+n+"/"+a+"/"+e;return o[t]||(o[t]=new Tr)},c=s(""),h=s(":dels"),p=d[t](i),y=p[0],v=p[1];if(s(y.name||"").add(v),!y.isPrimaryKey){if("count"!==t){var b="query"===t&&f&&i.values&&u.query(e(e({},i),{values:!1}));return u[t].apply(this,arguments).then((function(e){if("query"===t){if(f&&i.values)return b.then((function(t){var n=t.result;return c.addKeys(n),e}));var n=i.values?e.result.map(l):e.result;i.values?c.addKeys(n):h.addKeys(n)}else if("openCursor"===t){var r=e,o=i.values;return r&&Object.create(r,{key:{get:function(){return h.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return h.addKey(e),e}},value:{get:function(){return o&&c.addKey(r.primaryKey),r.value}}})}return e}))}h.add(r)}}return u[t].apply(this,arguments)}})),h}})}};function Dr(e,t,n,r){function i(t){var i=e(t.name||"");function a(e){return null!=e?t.extractKey(e):null}var u=function(e){return t.multiEntry&&o(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(n||r).forEach((function(e,t){var i=n&&a(n[t]),o=r&&a(r[t]);0!==nn(i,o)&&(null!=i&&u(i),null!=o&&u(o))}))}t.indexes.forEach(i)}var Ur,Fr=function(){function t(n,r){var i=this;this._middlewares={},this.verno=0;var o=t.dependencies;this._options=r=e({addons:t.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var a=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ue,dbReadyPromise:null,cancelOpen:ue,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};u.dbReadyPromise=new Me((function(e){u.dbReadyResolve=e})),u.openCanceller=new Me((function(e,t){u.cancelOpen=t})),this._state=u,this.name=n,this.on=Gt(this,"populate","blocked","versionchange","close",{ready:[ye,ue]}),this.on.ready.subscribe=m(this.on.ready.subscribe,(function(e){return function(n,r){t.vip((function(){var t=i._state;if(t.openComplete)t.dbOpenError||Me.resolve().then(n),r&&e(n);else if(t.onReadyBeingFired)t.onReadyBeingFired.push(n),r&&e(n);else{e(n);var o=i;r||e((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=ln(this),this.Table=$t(this),this.Transaction=Tn(this),this.Version=ar(this),this.WhereClause=En(this),this.on("versionchange",(function(e){e.newVersion,i.close()})),this.on("blocked",(function(e){!e.newVersion||(e.newVersion,e.oldVersion)})),this._maxKey=In(r.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new i.Transaction(e,t,n,i._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(e){i.on("blocked").fire(e),Bt.filter((function(e){return e.name===i.name&&e!==i&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(wr),this.use(Or),this.use(Kr),this.use(kr),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach((function(e){return e(i)}))}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new re.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Jn),n.stores({}),this._state.autoSchema=!1,n)},t.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||De.letThrough||this._vip)?e():new Me((function(e,n){if(t._state.openComplete)return n(new re.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new re.DatabaseClosed);t.open().catch(ue)}t._state.dbReadyPromise.then(e,n)})).then(e)},t.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort((function(e,t){return e.level-t.level})),this},t.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},t.prototype.open=function(){return dr(this)},t.prototype._close=function(){var e=this._state,t=Bt.indexOf(this);if(t>=0&&Bt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(n){}this._novip.idbdb=null}e.dbReadyPromise=new Me((function(t){e.dbReadyResolve=t})),e.openCanceller=new Me((function(t,n){e.cancelOpen=n}))},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new re.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Me((function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=ot((function(){fr(e._deps,e.name),r()})),t.onerror=On(i),t.onblocked=e._fireOnBlocked};if(t)throw new re.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return null!==this.idbdb},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},t.prototype.hasFailed=function(){return null!==this._state.dbOpenError},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return i(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=vr.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,t,n){var r=this,i=De.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,u=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!==typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Ft)o=Ft;else{if("rw"!=e&&e!=Lt)throw new re.InvalidArgument("Invalid transaction mode: "+e);o=Lt}if(i){if(i.mode===Ft&&o===Lt){if(!u)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!u)throw new re.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),u&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(function(e,t){t(c)})):St(c)}var s=br.bind(null,this,o,a,i,n);return i?i._promise(o,s,"lock"):De.trans?wt(De.transless,(function(){return r._whenReady(s)})):this._whenReady(s)},t.prototype.table=function(e){if(!c(this._allTables,e))throw new re.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),Lr="undefined"!==typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",Mr=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!==typeof e?e:{next:e,error:t,complete:n})},e.prototype[Lr]=function(){return this},e}();function qr(e,t){return i(t).forEach((function(n){var r=e[n]||(e[n]=new Tr);jr(r,t[n])})),e}function Vr(e){return new Mr((function(t){var n=L(e);function r(t){n&&pt();var r=function(){return ht(e,{subscr:t,trans:null})},i=De.trans?wt(De.transless,r):r();return n&&i.then(dt,dt),i}var o=!1,a={},u={},s={get closed(){return o},unsubscribe:function(){o=!0,kn.storagemutated.unsubscribe(h)}};t.start&&t.start(s);var c=!1,l=!1;function f(){return i(u).some((function(e){return a[e]&&Cr(a[e],u[e])}))}var h=function(e){qr(a,e),f()&&p()},p=function(){if(!c&&!o){a={};var e={},n=r(e);l||(kn(xn,h),l=!0),c=!0,Promise.resolve(n).then((function(n){c=!1,o||(f()?p():(a={},u=e,t.next&&t.next(n)))}),(function(e){c=!1,t.error&&t.error(e),s.unsubscribe()}))}};return p(),s}))}try{Ur={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(Wr){Ur={indexedDB:null,IDBKeyRange:null}}var Yr=Fr;function Gr(e){var t=Jr;try{Jr=!0,kn.storagemutated.fire(e)}finally{Jr=t}}l(Yr,e(e({},ae),{delete:function(e){var t=new Yr(e,{addons:[]});return t.delete()},exists:function(e){return new Yr(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return cr(Yr.dependencies).then(e)}catch(Sr){return St(new re.MissingAPI)}},defineClass:function(){function e(e){a(this,e)}return e},ignoreTransaction:function(e){return De.trans?wt(De.transless,e):e()},vip:hr,async:function(e){return function(){try{var t=yr(e.apply(this,arguments));return t&&"function"===typeof t.then?t:Me.resolve(t)}catch(Wr){return St(Wr)}}},spawn:function(e,t,n){try{var r=yr(e.apply(n,t||[]));return r&&"function"===typeof r.then?r:Me.resolve(r)}catch(Wr){return St(Wr)}},currentTransaction:{get:function(){return De.trans||null}},waitFor:function(e,t){var n=Me.resolve("function"===typeof e?Yr.ignoreTransaction(e):e).timeout(t||6e4);return De.trans?De.trans.waitFor(n):n},Promise:Me,debug:{get:function(){return M},set:function(e){q(e,"dexie"===e?function(){return!0}:Dt)}},derive:p,extend:a,props:l,override:m,Events:Gt,on:kn,liveQuery:Vr,extendObservabilitySet:qr,getByKeyPath:O,setByKeyPath:A,delByKeyPath:x,shallowClone:S,deepClone:C,getObjectDiff:_r,cmp:nn,asap:w,minKey:Nt,addons:[],connections:Bt,errnames:te,dependencies:Ur,semVer:Pt,version:Pt.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),Yr.maxKey=In(Yr.dependencies.IDBKeyRange),"undefined"!==typeof dispatchEvent&&"undefined"!==typeof addEventListener&&(kn(xn,(function(e){var t;Jr||(It?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Sn,!0,!0,e)):t=new CustomEvent(Sn,{detail:e}),Jr=!0,dispatchEvent(t),Jr=!1)})),addEventListener(Sn,(function(e){var t=e.detail;Jr||Gr(t)})));var Jr=!1;if("undefined"!==typeof BroadcastChannel){var $r=new BroadcastChannel(Sn);kn(xn,(function(e){Jr||$r.postMessage(e)})),$r.onmessage=function(e){e.data&&Gr(e.data)}}else if("undefined"!==typeof self&&"undefined"!==typeof navigator){kn(xn,(function(e){try{Jr||("undefined"!==typeof localStorage&&localStorage.setItem(Sn,JSON.stringify({trig:Math.random(),changedParts:e})),"object"===typeof self["clients"]&&n([],self["clients"].matchAll({includeUncontrolled:!0}),!0).forEach((function(t){return t.postMessage({type:Sn,changedParts:e})})))}catch(Sr){}})),"undefined"!==typeof addEventListener&&addEventListener("storage",(function(e){if(e.key===Sn){var t=JSON.parse(e.newValue);t&&Gr(t.changedParts)}}));var zr=self.document&&navigator.serviceWorker;zr&&zr.addEventListener("message",Xr)}function Xr(e){var t=e.data;t&&t.type===Sn&&Gr(t.changedParts)}Me.rejectionMapper=oe,q(M,Dt);var Hr=Object.freeze({__proto__:null,Dexie:Fr,liveQuery:Vr,default:Fr,RangeSet:Tr,mergeRanges:jr,rangesOverlap:Cr});return e(Fr,Hr,{default:Fr}),Fr}))}).call(this,n("c8ba"))}}]);